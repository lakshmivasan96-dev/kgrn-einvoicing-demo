<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>KGRN UAE E-Invoicing Portal</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --orange:#E8471C; --orange-light:#FFF0EB; --orange-mid:#FF7045;
  --gray-50:#F9FAFB; --gray-100:#F3F4F6; --gray-200:#E5E7EB;
  --gray-300:#D1D5DB; --gray-400:#9CA3AF; --gray-500:#6B7280;
  --gray-600:#4B5563; --gray-700:#374151; --gray-900:#111827;
  --success:#16A34A; --warn:#D97706; --error:#DC2626; --info:#2563EB;
  --navy:#1A1A2E;
}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--gray-50);color:var(--gray-900);min-height:100vh}
button,input,select,textarea{font-family:'DM Sans',sans-serif}
a{text-decoration:none}
table{border-collapse:collapse}

/* ‚îÄ‚îÄ Screens ‚îÄ‚îÄ */
.screen{display:none}
.screen.active{display:block}

/* ‚îÄ‚îÄ Top nav ‚îÄ‚îÄ */
.topnav{
  position:sticky;top:0;z-index:200;background:#fff;
  border-bottom:1px solid var(--gray-200);padding:0 32px;height:60px;
  display:flex;align-items:center;justify-content:space-between;
  box-shadow:0 1px 0 rgba(0,0,0,.04);
}
.logo-box{display:flex;align-items:center;gap:10px;cursor:pointer}
.logo-sq{background:var(--orange);padding:5px 9px;border-radius:4px;display:flex;gap:3px}
.logo-sq span{color:#fff;font-weight:900;font-size:15px;letter-spacing:1px}
.logo-text{display:flex;flex-direction:column;line-height:1.1}
.logo-name{font-weight:800;font-size:14px;color:var(--gray-900);letter-spacing:.5px}
.logo-sub{font-weight:400;font-size:8px;color:var(--gray-600);letter-spacing:1.5px;text-transform:uppercase}
.nav-right{display:flex;align-items:center;gap:10px}
.nav-user{display:flex;align-items:center;gap:8px;padding:6px 14px;background:var(--gray-50);border-radius:20px;cursor:pointer;border:1px solid var(--gray-200)}
.nav-avatar{width:28px;height:28px;border-radius:50%;background:var(--orange);display:flex;align-items:center;justify-content:center;color:#fff;font-size:11px;font-weight:800}

/* ‚îÄ‚îÄ Demo bar ‚îÄ‚îÄ */
.demo-bar{background:var(--gray-900);padding:7px 24px;display:flex;gap:6px;overflow-x:auto;align-items:center;scrollbar-width:none}
.demo-bar::-webkit-scrollbar{display:none}
.demo-lbl{font-size:10px;color:rgba(255,255,255,.4);letter-spacing:1px;text-transform:uppercase;margin-right:8px;white-space:nowrap}
.db{padding:4px 12px;border-radius:12px;border:none;background:rgba(255,255,255,.1);color:rgba(255,255,255,.6);font-size:11px;font-weight:600;white-space:nowrap;transition:all .15s;cursor:pointer}
.db.active{background:var(--orange);color:#fff}
.db:hover:not(.active){background:rgba(255,255,255,.18)}

/* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border:none;border-radius:8px;font-weight:600;font-size:14px;padding:11px 22px;cursor:pointer;transition:all .18s ease;white-space:nowrap}
.btn-full{width:100%}
.btn-sm{padding:8px 16px;font-size:13px}
.btn-lg{padding:14px 28px;font-size:16px}
.btn-primary{background:var(--orange);color:#fff;box-shadow:0 2px 8px rgba(232,71,28,.25)}
.btn-primary:hover{background:#c73a14}
.btn-secondary{background:var(--orange-light);color:var(--orange)}
.btn-secondary:hover{background:#ffe0d5}
.btn-ghost{background:transparent;color:var(--gray-700);border:1.5px solid var(--gray-200)}
.btn-ghost:hover{background:var(--gray-100)}
.btn-outline-white{background:transparent;color:#fff;border:1.5px solid rgba(255,255,255,.4)}
.btn-outline-white:hover{background:rgba(255,255,255,.1)}
.btn:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}

/* ‚îÄ‚îÄ Card ‚îÄ‚îÄ */
.card{background:#fff;border-radius:12px;border:1px solid var(--gray-200);box-shadow:0 1px 4px rgba(0,0,0,.06)}

/* ‚îÄ‚îÄ Forms ‚îÄ‚îÄ */
.fg{display:flex;flex-direction:column;gap:4px}
.fl{font-size:13px;font-weight:600;color:var(--gray-700)}
.fl .req{color:var(--orange)}
.fi{padding:10px 14px;border-radius:8px;border:1.5px solid var(--gray-200);font-size:14px;color:var(--gray-900);background:#fff;transition:border .15s;outline:none;width:100%}
.fi:focus{border-color:var(--orange)}
.fi.err{border-color:var(--error)}
.fh{font-size:12px;color:var(--gray-400)}
select.fi{appearance:none;cursor:pointer}
.input-icon-wrap{position:relative}
.input-icon-wrap .fi{padding-left:40px}
.input-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:16px;pointer-events:none}

/* ‚îÄ‚îÄ Badges ‚îÄ‚îÄ */
.badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:700;letter-spacing:.3px;text-transform:uppercase}
.badge-new{background:#EFF6FF;color:var(--info)}
.badge-contacted{background:#FEF9C3;color:#854D0E}
.badge-inprogress{background:#FFF7ED;color:#9A3412}
.badge-signed{background:#F0FDF4;color:var(--success)}
.badge-paid{background:#F0FDF4;color:var(--success)}
.badge-activated{background:var(--orange-light);color:var(--orange)}
.badge-proposal{background:var(--gray-100);color:var(--gray-700)}
.badge-annual{background:#F0FDF4;color:var(--success)}
.badge-add-on{background:var(--orange-light);color:var(--orange)}

/* ‚îÄ‚îÄ Stepper ‚îÄ‚îÄ */
.stepper{display:flex;align-items:center;overflow-x:auto;padding:4px 0}
.step-item{display:flex;align-items:center}
.step-col{display:flex;flex-direction:column;align-items:center;gap:4px;min-width:70px}
.step-dot{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;transition:all .2s;background:var(--gray-200);color:var(--gray-400)}
.step-dot.done{background:var(--orange);color:#fff}
.step-dot.active{background:var(--orange);color:#fff;box-shadow:0 0 0 4px rgba(232,71,28,.15)}
.step-lbl{font-size:10px;font-weight:500;color:var(--gray-400);text-align:center;white-space:nowrap}
.step-lbl.active{font-weight:700;color:var(--orange)}
.step-line{width:40px;height:2px;background:var(--gray-200);margin:0 4px;margin-bottom:18px;transition:all .2s;flex-shrink:0}
.step-line.done{background:var(--orange)}

/* ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ */
.sidebar{width:220px;background:var(--navy);padding:24px 0;flex-shrink:0}
.si{display:flex;align-items:center;gap:12px;padding:12px 20px;background:transparent;border-left:3px solid transparent;cursor:pointer;transition:all .15s}
.si.active{background:rgba(232,71,28,.15);border-left-color:var(--orange)}
.si .sii{color:rgba(255,255,255,.4);font-size:18px}
.si.active .sii{color:var(--orange)}
.si .sil{font-size:13px;font-weight:500;color:rgba(255,255,255,.45)}
.si.active .sil{font-weight:700;color:#fff}
.portal-wrap{display:flex;min-height:calc(100vh - 108px)}
.portal-main{flex:1;background:var(--gray-50);overflow-y:auto}

/* ‚îÄ‚îÄ Layout helpers ‚îÄ‚îÄ */
.page{max-width:900px;margin:0 auto;padding:32px 24px}
.page-md{max-width:760px;margin:0 auto;padding:32px 24px}
.center-screen{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:32px;background:var(--gray-50)}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.grid-2 .span-2{grid-column:1/-1}
.grid-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
.grid-4{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:16px}
.sec-title{font-weight:900;font-size:24px;color:var(--gray-900);margin-bottom:4px}
.sec-sub{font-size:14px;color:var(--gray-600);margin-bottom:24px}

/* ‚îÄ‚îÄ Info boxes ‚îÄ‚îÄ */
.info-box{border-radius:8px;padding:12px 14px;display:flex;gap:10px;align-items:flex-start}
.info-blue{background:#EFF6FF;border:1px solid #BFDBFE}
.info-yellow{background:#FFFBEB;border:1px solid #FCD34D}
.info-green{background:#F0FDF4;border:1px solid #BBF7D0}

/* ‚îÄ‚îÄ Misc ‚îÄ‚îÄ */
.spinner{width:56px;height:56px;border-radius:50%;border:4px solid var(--orange);border-top-color:transparent;animation:spin .8s linear infinite}
.progress-bar{height:6px;background:var(--gray-200);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;background:var(--orange);border-radius:3px}
.kanban{display:flex;gap:16px;overflow-x:auto;padding-bottom:16px}
.kanban-col{min-width:200px;flex-shrink:0}
.kanban-card{padding:14px;margin-bottom:10px;cursor:pointer;border-radius:10px;border:1px solid var(--gray-200);background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.05);transition:box-shadow .15s}
.kanban-card:hover{box-shadow:0 4px 12px rgba(0,0,0,.1)}
.upload-zone{border:2px dashed var(--gray-300);border-radius:12px;padding:48px 24px;text-align:center;background:var(--gray-50);transition:all .2s;cursor:pointer}
.upload-zone:hover,.upload-zone.drag{border-color:var(--orange);background:var(--orange-light)}
.pay-tab{flex:1;padding:10px 12px;border-radius:8px;border:2px solid var(--gray-200);background:#fff;font-size:12px;font-weight:700;color:var(--gray-600);display:flex;align-items:center;gap:6px;justify-content:center;transition:all .15s;cursor:pointer}
.pay-tab.active{border-color:var(--orange);background:var(--orange-light);color:var(--orange)}
.svc-item{display:flex;align-items:flex-start;gap:6px;font-size:12px;color:var(--gray-700);line-height:1.5;margin-bottom:5px}
.svc-item::before{content:'';width:5px;height:5px;border-radius:50%;background:var(--dot,var(--orange));margin-top:5px;flex-shrink:0}
.chk-box{width:18px;height:18px;border-radius:4px;border:2px solid var(--gray-300);background:#fff;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px;transition:all .15s;cursor:pointer;font-size:11px;color:#fff}
.chk-box.on{border-color:var(--orange);background:var(--orange)}
.service-card{border-radius:12px;border:2px solid var(--gray-200);background:#fff;transition:all .2s;cursor:pointer}
.tl-item{display:flex;gap:12px;margin-bottom:12px}
.tl-col{display:flex;flex-direction:column;align-items:center}
.tl-dot{width:18px;height:18px;border-radius:50%;background:var(--gray-300);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:10px;color:#fff}
.tl-dot.done{background:var(--orange)}
.tl-line{width:1px;height:24px;background:var(--gray-200);margin:2px 0}
.tl-line.done{background:var(--orange-light)}
.onb-step{display:flex;align-items:center;gap:14px;padding:12px 16px;background:var(--orange-light);border-radius:8px;margin-bottom:8px}
.onb-num{width:28px;height:28px;border-radius:50%;background:var(--orange);color:#fff;font-size:12px;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.order-row{display:flex;justify-content:space-between;margin-bottom:10px;font-size:12px;color:var(--gray-600)}
.email-tab{padding:8px 16px;border-radius:20px;border:2px solid var(--gray-200);background:#fff;font-size:12px;font-weight:700;color:var(--gray-600);white-space:nowrap;transition:all .15s;cursor:pointer}
.email-tab.active{border-color:var(--orange);background:var(--orange-light);color:var(--orange)}
.data-table{width:100%}
.data-table th{padding:10px 14px;text-align:left;font-size:11px;font-weight:700;color:var(--gray-600);letter-spacing:.5px;text-transform:uppercase;border-bottom:2px solid var(--gray-200);background:var(--gray-50)}
.data-table th.right{text-align:right}
.data-table td{padding:12px 14px;font-size:13px;border-bottom:1px solid var(--gray-100)}
.data-table td.right{text-align:right;font-weight:700}
.data-table tr:hover td{background:var(--gray-50)}
.toast{position:fixed;bottom:24px;right:24px;z-index:9999;border-radius:10px;padding:12px 16px;display:none;align-items:center;gap:10px;box-shadow:0 4px 20px rgba(0,0,0,.12);font-size:14px;max-width:340px;animation:slideUp .25s ease}
.toast-success{background:#F0FDF4;border:1.5px solid var(--success)}
.toast-error{background:#FEF2F2;border:1.5px solid var(--error)}
.toast-info{background:#EFF6FF;border:1.5px solid var(--info)}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}

/* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
@media(max-width:640px){
  .grid-2,.grid-3,.grid-4{grid-template-columns:1fr}
  .grid-2 .span-2{grid-column:auto}
  .topnav{padding:0 16px}
  .page,.page-md{padding:20px 16px}
  .sidebar{display:none}
  .portal-wrap{flex-direction:column}
  .step-col{min-width:55px}
  .step-line{width:20px}
  .login-split{flex-direction:column}
  .login-left{min-height:240px!important;padding:32px 24px!important}
  .login-right{min-height:auto!important;width:100%!important;padding:32px 24px!important}
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TOP NAV  (hidden on login)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<nav class="topnav" id="topnav" style="display:none">
  <div class="logo-box" onclick="showScreen('landing')">
    <div class="logo-sq"><span>K</span><span>G</span><span>R</span><span>N</span></div>
    <div class="logo-text"><span class="logo-name">KGRN</span><span class="logo-sub">Chartered Accountants</span></div>
  </div>
  <div class="nav-right" id="nav-right">
    <button class="btn btn-ghost btn-sm" onclick="showScreen('support')">Support Portal</button>
    <div class="nav-user" id="nav-user" style="display:none" onclick="handleLogout()">
      <div class="nav-avatar" id="nav-avatar">AC</div>
      <span style="font-size:13px;font-weight:600;color:var(--gray-700)" id="nav-username">ABC Trading</span>
      <span style="font-size:12px;color:var(--gray-400)">‚ñæ</span>
    </div>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     DEMO BAR
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="demo-bar" id="demo-bar">
  <span class="demo-lbl">Demo ‚Üí</span>
  <button class="db active" data-s="login"      onclick="showScreen('login')">üîë Login</button>
  <button class="db"        data-s="landing"    onclick="showScreen('landing')">üè† Landing</button>
  <button class="db"        data-s="onboarding" onclick="showScreen('onboarding')">üöÄ Onboarding</button>
  <button class="db"        data-s="upload"     onclick="showScreen('upload')">üìÅ Upload</button>
  <button class="db"        data-s="services"   onclick="showScreen('services')">üì¶ Services</button>
  <button class="db"        data-s="proposal"   onclick="showScreen('proposal')">üìÑ Proposal</button>
  <button class="db"        data-s="agreement"  onclick="showScreen('agreement')">‚úçÔ∏è Agreement</button>
  <button class="db"        data-s="payment"    onclick="showScreen('payment')">üí≥ Payment</button>
  <button class="db"        data-s="invoice"    onclick="showScreen('invoice')">üßæ Invoice</button>
  <button class="db"        data-s="pwreset"    onclick="showScreen('pwreset')">üîí Reset PW</button>
  <button class="db"        data-s="dashboard"  onclick="showScreen('dashboard')">üìä Dashboard</button>
  <button class="db"        data-s="support"    onclick="showScreen('support')">üéØ Support</button>
  <button class="db"        data-s="emails"     onclick="showScreen('emails')">üìß Emails</button>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 1 ‚Äî CLIENT LOGIN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-login" class="screen active">
  <div class="login-split" style="display:flex;min-height:calc(100vh - 36px)">

    <!-- Left: Brand panel -->
    <div class="login-left" style="flex:1;background:linear-gradient(150deg,#1A1A2E 0%,#0F3460 65%,#1a2a4a 100%);padding:60px 52px;display:flex;flex-direction:column;justify-content:space-between;position:relative;overflow:hidden;min-height:100vh">
      <div style="position:absolute;top:-80px;right:-80px;width:380px;height:380px;border-radius:50%;background:rgba(232,71,28,.1);pointer-events:none"></div>
      <div style="position:absolute;bottom:-100px;left:-60px;width:300px;height:300px;border-radius:50%;background:rgba(232,71,28,.07);pointer-events:none"></div>
      <div style="position:absolute;top:45%;right:40px;width:100px;height:100px;border-radius:50%;background:rgba(255,255,255,.04);pointer-events:none"></div>
      <!-- Logo -->
      <div style="position:relative;z-index:1">
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:60px">
          <div style="background:var(--orange);padding:8px 12px;border-radius:6px;display:flex;gap:4px">
            <span style="color:#fff;font-weight:900;font-size:18px;letter-spacing:1px">K</span><span style="color:#fff;font-weight:900;font-size:18px">G</span><span style="color:#fff;font-weight:900;font-size:18px">R</span><span style="color:#fff;font-weight:900;font-size:18px">N</span>
          </div>
          <div><div style="font-weight:800;font-size:16px;color:#fff">KGRN</div><div style="font-size:9px;color:rgba(255,255,255,.5);letter-spacing:1.5px;text-transform:uppercase">Chartered Accountants</div></div>
        </div>
        <div style="font-weight:900;font-size:34px;color:#fff;line-height:1.2;margin-bottom:18px">UAE E-Invoicing<br><span style="color:var(--orange-mid)">Compliance Portal</span></div>
        <div style="font-size:15px;color:rgba(255,255,255,.6);line-height:1.75;max-width:360px">Your end-to-end solution for FTA e-invoicing mandate compliance ‚Äî from assessment to full platform activation.</div>
      </div>
      <!-- Features -->
      <div style="position:relative;z-index:1">
        <div style="display:flex;flex-direction:column;gap:18px;margin-bottom:44px">
          <div style="display:flex;align-items:center;gap:14px">
            <div style="width:40px;height:40px;border-radius:9px;background:rgba(232,71,28,.2);border:1px solid rgba(232,71,28,.35);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:18px">‚ö°</div>
            <div><div style="font-weight:700;font-size:13px;color:#fff">PINT AE XML Generation & Submission</div><div style="font-size:12px;color:rgba(255,255,255,.45);margin-top:2px">Full C5 (FTA) & C3 (Buyer ASP) integration</div></div>
          </div>
          <div style="display:flex;align-items:center;gap:14px">
            <div style="width:40px;height:40px;border-radius:9px;background:rgba(22,163,74,.2);border:1px solid rgba(22,163,74,.35);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:18px">üõ°Ô∏è</div>
            <div><div style="font-weight:700;font-size:13px;color:#fff">SLA-Backed & Secure</div><div style="font-size:12px;color:rgba(255,255,255,.45);margin-top:2px">99.9% uptime with enterprise-grade encryption</div></div>
          </div>
          <div style="display:flex;align-items:center;gap:14px">
            <div style="width:40px;height:40px;border-radius:9px;background:rgba(37,99,235,.2);border:1px solid rgba(37,99,235,.35);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:18px">üìä</div>
            <div><div style="font-weight:700;font-size:13px;color:#fff">150,000 Invoices / Year</div><div style="font-size:12px;color:rgba(255,255,255,.45);margin-top:2px">Single licence via Taxilla, all entities covered</div></div>
          </div>
        </div>
        <div style="padding-top:24px;border-top:1px solid rgba(255,255,255,.1);font-size:11px;color:rgba(255,255,255,.3)">¬© 2026 KGRN Chartered Accountants LLC ¬∑ Dubai, UAE</div>
      </div>
    </div>

    <!-- Right: Login form -->
    <div class="login-right" style="width:460px;flex-shrink:0;display:flex;align-items:center;justify-content:center;padding:48px 40px;background:#fff;min-height:100vh">
      <div style="width:100%;max-width:360px">
        <!-- Role tabs -->
        <div style="display:flex;background:var(--gray-100);border-radius:10px;padding:4px;margin-bottom:32px;gap:4px">
          <button id="role-client" onclick="setRole('client')" style="flex:1;padding:9px;border-radius:7px;border:none;font-size:13px;font-weight:700;cursor:pointer;background:var(--orange);color:#fff;transition:all .2s">Client</button>
          <button id="role-admin"  onclick="setRole('admin')"  style="flex:1;padding:9px;border-radius:7px;border:none;font-size:13px;font-weight:700;cursor:pointer;background:transparent;color:var(--gray-500);transition:all .2s">KGRN Admin</button>
        </div>

        <div id="login-client-area">
          <div style="margin-bottom:28px">
            <div style="font-weight:900;font-size:26px;color:var(--gray-900);margin-bottom:6px">Client Sign In</div>
            <div style="font-size:13px;color:var(--gray-500)">Access your e-invoicing onboarding portal</div>
          </div>
          <!-- Error banner -->
          <div id="login-error" style="display:none;background:#FEF2F2;border:1px solid #FECACA;border-radius:8px;padding:10px 14px;margin-bottom:16px;font-size:13px;color:var(--error);display:none;align-items:center;gap:8px">
            <span>‚ö†Ô∏è</span><span>Invalid email or password. Please try again.</span>
          </div>
          <div style="display:flex;flex-direction:column;gap:14px">
            <div class="fg">
              <label class="fl">Email Address</label>
              <div class="input-icon-wrap"><span class="input-icon">‚úâÔ∏è</span><input class="fi" id="login-email" type="email" placeholder="you@company.ae" value="finance@abctrading.ae"/></div>
            </div>
            <div class="fg">
              <label class="fl">Password</label>
              <div class="input-icon-wrap"><span class="input-icon">üîí</span><input class="fi" id="login-pw" type="password" placeholder="Enter your password" value="Demo@1234"/></div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <label style="display:flex;align-items:center;gap:8px;cursor:pointer"><input type="checkbox" style="accent-color:var(--orange)"/><span style="font-size:13px;color:var(--gray-600)">Remember me</span></label>
              <a href="#" style="font-size:13px;font-weight:600;color:var(--orange)" onclick="showScreen('pwreset');return false">Forgot password?</a>
            </div>
            <button class="btn btn-primary btn-full" style="margin-top:4px" onclick="doLogin()">Sign In ‚Üí</button>
          </div>
          <div style="margin-top:20px;padding-top:20px;border-top:1px solid var(--gray-100);text-align:center">
            <span style="font-size:13px;color:var(--gray-500)">New to KGRN e-Invoicing? </span>
            <a href="#" onclick="showScreen('landing');return false" style="font-size:13px;font-weight:700;color:var(--orange)">Learn More</a>
          </div>
          <div style="margin-top:16px;background:var(--gray-50);border-radius:8px;padding:12px 14px;text-align:center">
            <div style="font-size:11px;color:var(--gray-400);margin-bottom:4px">Demo credentials</div>
            <div style="font-size:12px;color:var(--gray-600);font-weight:600">finance@abctrading.ae &nbsp;¬∑&nbsp; Demo@1234</div>
          </div>
        </div>

        <div id="login-admin-area" style="display:none">
          <div style="margin-bottom:28px">
            <div style="font-weight:900;font-size:26px;color:var(--gray-900);margin-bottom:6px">Admin Sign In</div>
            <div style="font-size:13px;color:var(--gray-500)">KGRN internal team portal</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:14px">
            <div class="fg"><label class="fl">Admin Email</label><div class="input-icon-wrap"><span class="input-icon">‚úâÔ∏è</span><input class="fi" type="email" placeholder="admin@kgrn.ae"/></div></div>
            <div class="fg"><label class="fl">Password</label><div class="input-icon-wrap"><span class="input-icon">üîí</span><input class="fi" type="password" placeholder="Admin password"/></div></div>
            <button class="btn btn-primary btn-full" style="margin-top:4px" onclick="showScreen('support')">Sign In as Admin ‚Üí</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 2 ‚Äî LANDING PAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-landing" class="screen">
  <!-- Hero -->
  <div style="background:linear-gradient(135deg,#1A1A2E 0%,#16213E 55%,#0F3460 100%);padding:80px 32px 110px;position:relative;overflow:hidden;text-align:center">
    <div style="position:absolute;top:-60px;right:-60px;width:340px;height:340px;border-radius:50%;background:rgba(232,71,28,.12);pointer-events:none"></div>
    <div style="position:absolute;bottom:-80px;left:-40px;width:260px;height:260px;border-radius:50%;background:rgba(232,71,28,.08);pointer-events:none"></div>
    <div style="max-width:780px;margin:0 auto;position:relative;z-index:1">
      <div style="display:inline-flex;align-items:center;gap:8px;background:rgba(232,71,28,.15);border:1px solid rgba(232,71,28,.3);border-radius:20px;padding:6px 18px;margin-bottom:24px">
        <div style="width:6px;height:6px;border-radius:50%;background:var(--orange);animation:pulse 2s infinite"></div>
        <span style="color:var(--orange-mid);font-size:12px;font-weight:700;letter-spacing:1px;text-transform:uppercase">UAE FTA E-Invoicing Mandate ‚Äî Phase Rollout Active</span>
      </div>
      <h1 style="font-weight:900;font-size:clamp(30px,5vw,56px);color:#fff;margin:0 0 20px;line-height:1.1">End-to-End UAE E-Invoicing<br><span style="color:var(--orange-mid)">Compliance by KGRN</span></h1>
      <p style="font-size:17px;color:rgba(255,255,255,.65);max-width:580px;margin:0 auto 40px;line-height:1.75">KGRN Chartered Accountants delivers structured, FTA-compliant e-invoicing implementation ‚Äî from gap analysis through live platform onboarding ‚Äî powered by Taxilla.</p>
      <div style="display:flex;gap:14px;justify-content:center;flex-wrap:wrap">
        <button class="btn btn-primary btn-lg" onclick="showScreen('onboarding')">Start Onboarding ‚Üí</button>
        <button class="btn btn-outline-white btn-lg" onclick="scrollTo({top:600,behavior:'smooth'})">Learn More ‚Üì</button>
      </div>
    </div>
  </div>

  <!-- Stats bar -->
  <div style="background:var(--orange);padding:24px 32px">
    <div style="max-width:900px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:24px;text-align:center">
      <div><div style="font-weight:900;font-size:28px;color:#fff">150k+</div><div style="font-size:12px;color:rgba(255,255,255,.75);margin-top:2px">Invoices / Year</div></div>
      <div><div style="font-weight:900;font-size:28px;color:#fff">90-Day</div><div style="font-size:12px;color:rgba(255,255,255,.75);margin-top:2px">Implementation Roadmap</div></div>
      <div><div style="font-weight:900;font-size:28px;color:#fff">100%</div><div style="font-size:12px;color:rgba(255,255,255,.75);margin-top:2px">FTA PINT AE Compliant</div></div>
      <div><div style="font-weight:900;font-size:28px;color:#fff">24/7</div><div style="font-size:12px;color:rgba(255,255,255,.75);margin-top:2px">SLA-Backed Support</div></div>
    </div>
  </div>

  <!-- About KGRN -->
  <div style="max-width:900px;margin:0 auto;padding:64px 32px 0">
    <div class="grid-2" style="gap:40px;align-items:center">
      <div>
        <div style="font-size:12px;font-weight:700;color:var(--orange);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:10px">About KGRN</div>
        <div style="font-weight:900;font-size:28px;color:var(--gray-900);line-height:1.2;margin-bottom:16px">Trusted Chartered Accountants in the UAE</div>
        <div style="font-size:14px;color:var(--gray-600);line-height:1.8;margin-bottom:20px">KGRN Chartered Accountants LLC is a Dubai-based professional services firm specialising in audit, tax compliance, and technology-led financial transformation. With deep expertise in UAE VAT and FTA regulations, KGRN is the partner businesses trust to navigate the e-invoicing mandate.</div>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="display:flex;align-items:center;gap:10px"><span style="color:var(--success);font-size:16px">‚úÖ</span><span style="font-size:14px;color:var(--gray-700)">FTA Registered Tax Agent</span></div>
          <div style="display:flex;align-items:center;gap:10px"><span style="color:var(--success);font-size:16px">‚úÖ</span><span style="font-size:14px;color:var(--gray-700)">Certified Taxilla Implementation Partner</span></div>
          <div style="display:flex;align-items:center;gap:10px"><span style="color:var(--success);font-size:16px">‚úÖ</span><span style="font-size:14px;color:var(--gray-700)">50+ Businesses Onboarded Across UAE</span></div>
          <div style="display:flex;align-items:center;gap:10px"><span style="color:var(--success);font-size:16px">‚úÖ</span><span style="font-size:14px;color:var(--gray-700)">Dedicated Consultants ‚Äî Arabic & English</span></div>
        </div>
      </div>
      <div style="background:linear-gradient(135deg,var(--navy) 0%,#0F3460 100%);border-radius:16px;padding:36px;color:#fff">
        <div style="font-size:12px;font-weight:700;color:var(--orange-mid);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px">E-Invoicing at a Glance</div>
        <div style="display:flex;flex-direction:column;gap:14px">
          <div style="display:flex;justify-content:space-between;padding-bottom:14px;border-bottom:1px solid rgba(255,255,255,.1)"><span style="font-size:13px;color:rgba(255,255,255,.6)">Mandate Authority</span><span style="font-size:13px;font-weight:700;color:#fff">Federal Tax Authority (FTA)</span></div>
          <div style="display:flex;justify-content:space-between;padding-bottom:14px;border-bottom:1px solid rgba(255,255,255,.1)"><span style="font-size:13px;color:rgba(255,255,255,.6)">Network Standard</span><span style="font-size:13px;font-weight:700;color:#fff">PEPPOL ‚Äî PINT AE XML</span></div>
          <div style="display:flex;justify-content:space-between;padding-bottom:14px;border-bottom:1px solid rgba(255,255,255,.1)"><span style="font-size:13px;color:rgba(255,255,255,.6)">Integration Model</span><span style="font-size:13px;font-weight:700;color:#fff">5-Corner (C1‚ÄìC5)</span></div>
          <div style="display:flex;justify-content:space-between"><span style="font-size:13px;color:rgba(255,255,255,.6)">Our Platform</span><span style="font-size:13px;font-weight:700;color:var(--orange-mid)">Taxilla (KGRN Partner)</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Why E-Invoicing -->
  <div style="max-width:900px;margin:0 auto;padding:64px 32px 0">
    <div style="text-align:center;margin-bottom:40px">
      <div style="font-size:12px;font-weight:700;color:var(--orange);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:10px">Why It Matters</div>
      <div style="font-weight:900;font-size:30px;color:var(--gray-900);margin-bottom:10px">The UAE E-Invoicing Mandate</div>
      <div style="font-size:15px;color:var(--gray-600);max-width:560px;margin:0 auto;line-height:1.7">The FTA is rolling out mandatory e-invoicing across UAE businesses. Non-compliance carries financial penalties and operational risks.</div>
    </div>
    <div class="grid-3">
      <div class="card" style="padding:28px">
        <div style="width:48px;height:48px;border-radius:10px;background:#FEF2F2;display:flex;align-items:center;justify-content:center;margin-bottom:16px;font-size:24px">‚ö†Ô∏è</div>
        <div style="font-weight:800;font-size:15px;color:var(--gray-900);margin-bottom:8px">Regulatory Obligation</div>
        <div style="font-size:13px;color:var(--gray-600);line-height:1.7">All VAT-registered businesses in the UAE must adopt FTA-mandated e-invoicing under the phased rollout. Delays risk penalties and audit exposure.</div>
      </div>
      <div class="card" style="padding:28px">
        <div style="width:48px;height:48px;border-radius:10px;background:#F0FDF4;display:flex;align-items:center;justify-content:center;margin-bottom:16px;font-size:24px">üîó</div>
        <div style="font-weight:800;font-size:15px;color:var(--gray-900);margin-bottom:8px">Automated Exchange</div>
        <div style="font-size:13px;color:var(--gray-600);line-height:1.7">E-invoices are transmitted automatically via the PEPPOL network using PINT AE XML, ensuring real-time validation through the FTA clearance platform (C5).</div>
      </div>
      <div class="card" style="padding:28px">
        <div style="width:48px;height:48px;border-radius:10px;background:var(--orange-light);display:flex;align-items:center;justify-content:center;margin-bottom:16px;font-size:24px">üìà</div>
        <div style="font-weight:800;font-size:15px;color:var(--gray-900);margin-bottom:8px">Business Benefits</div>
        <div style="font-size:13px;color:var(--gray-600);line-height:1.7">Faster payment cycles, reduced disputes, lower fraud risk, cleaner AP/AR data, and a competitive edge for businesses operating across the UAE and GCC.</div>
      </div>
    </div>
  </div>

  <!-- The 5-Corner Model -->
  <div style="background:var(--gray-50);margin-top:64px;padding:64px 32px">
    <div style="max-width:900px;margin:0 auto">
      <div style="text-align:center;margin-bottom:40px">
        <div style="font-size:12px;font-weight:700;color:var(--orange);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:10px">How It Works</div>
        <div style="font-weight:900;font-size:28px;color:var(--gray-900)">The UAE 5-Corner E-Invoicing Flow</div>
      </div>
      <div style="display:flex;align-items:center;justify-content:center;gap:0;flex-wrap:wrap;row-gap:20px">
        <div style="text-align:center;min-width:110px">
          <div style="width:60px;height:60px;border-radius:50%;background:var(--orange);color:#fff;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 10px">C1</div>
          <div style="font-size:11px;font-weight:700;color:var(--gray-700)">Seller</div>
          <div style="font-size:10px;color:var(--gray-400)">Your ERP</div>
        </div>
        <div style="height:2px;width:40px;background:var(--orange);flex-shrink:0;margin-bottom:24px"></div>
        <div style="text-align:center;min-width:110px">
          <div style="width:60px;height:60px;border-radius:50%;background:#0F3460;color:#fff;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 10px">C2</div>
          <div style="font-size:11px;font-weight:700;color:var(--gray-700)">Seller's ASP</div>
          <div style="font-size:10px;color:var(--gray-400)">KGRN / Taxilla</div>
        </div>
        <div style="height:2px;width:40px;background:var(--orange);flex-shrink:0;margin-bottom:24px"></div>
        <div style="text-align:center;min-width:110px">
          <div style="width:60px;height:60px;border-radius:50%;background:var(--orange);color:#fff;font-weight:900;font-size:13px;display:flex;align-items:center;justify-content:center;margin:0 auto 10px">C5</div>
          <div style="font-size:11px;font-weight:700;color:var(--gray-700)">FTA / Zakat</div>
          <div style="font-size:10px;color:var(--gray-400)">Clearance Layer</div>
        </div>
        <div style="height:2px;width:40px;background:var(--orange);flex-shrink:0;margin-bottom:24px"></div>
        <div style="text-align:center;min-width:110px">
          <div style="width:60px;height:60px;border-radius:50%;background:#0F3460;color:#fff;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 10px">C3</div>
          <div style="font-size:11px;font-weight:700;color:var(--gray-700)">Buyer's ASP</div>
          <div style="font-size:10px;color:var(--gray-400)">Buyer Platform</div>
        </div>
        <div style="height:2px;width:40px;background:var(--orange);flex-shrink:0;margin-bottom:24px"></div>
        <div style="text-align:center;min-width:110px">
          <div style="width:60px;height:60px;border-radius:50%;background:var(--orange);color:#fff;font-weight:900;font-size:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 10px">C4</div>
          <div style="font-size:11px;font-weight:700;color:var(--gray-700)">Buyer</div>
          <div style="font-size:10px;color:var(--gray-400)">Buyer ERP</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Services -->
  <div style="max-width:900px;margin:0 auto;padding:64px 32px">
    <div style="text-align:center;margin-bottom:40px">
      <div style="font-size:12px;font-weight:700;color:var(--orange);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:10px">Our Services</div>
      <div style="font-weight:900;font-size:30px;color:var(--gray-900)">E-Invoicing Service Packages</div>
    </div>
    <div class="grid-3">
      <div style="padding:28px;border-radius:14px;background:#EFF6FF;border:1px solid rgba(37,99,235,.15)">
        <div style="font-weight:800;font-size:15px;color:var(--info);margin-bottom:4px">Phase 1</div>
        <div style="font-weight:900;font-size:18px;color:var(--gray-900);margin-bottom:16px">Impact Assessment<br>& Gap Analysis</div>
        <div class="svc-item" style="--dot:var(--info)">Regulatory & technical readiness review</div>
        <div class="svc-item" style="--dot:var(--info)">AP/AR process & ERP assessment</div>
        <div class="svc-item" style="--dot:var(--info)">Stakeholder & IT impact mapping</div>
        <div class="svc-item" style="--dot:var(--info)">90-day roadmap with risk & governance</div>
        <div class="svc-item" style="--dot:var(--info)">Gap analysis, mitigation & action plan</div>
      </div>
      <div style="padding:28px;border-radius:14px;background:var(--orange-light);border:1px solid rgba(232,71,28,.15)">
        <div style="font-weight:800;font-size:15px;color:var(--orange);margin-bottom:4px">Phase 2</div>
        <div style="font-weight:900;font-size:18px;color:var(--gray-900);margin-bottom:16px">Implementation<br>(One-Time)</div>
        <div class="svc-item">Master data validation & onboarding</div>
        <div class="svc-item">Native ERP integration ‚Äî file upload / API</div>
        <div class="svc-item">End-to-end Taxilla platform config</div>
        <div class="svc-item">Sandbox testing ‚Äî 3 transformations</div>
        <div class="svc-item">EMARA portal entity onboarding</div>
        <div class="svc-item">Training, user manuals & go-live</div>
      </div>
      <div style="padding:28px;border-radius:14px;background:#F0FDF4;border:1px solid rgba(22,163,74,.15)">
        <div style="font-weight:800;font-size:15px;color:var(--success);margin-bottom:4px">Ongoing</div>
        <div style="font-weight:900;font-size:18px;color:var(--gray-900);margin-bottom:16px">Annual<br>Subscription</div>
        <div class="svc-item" style="--dot:var(--success)">Up to 150,000 invoices/year</div>
        <div class="svc-item" style="--dot:var(--success)">Full KGRN‚ÄìTaxilla portal access</div>
        <div class="svc-item" style="--dot:var(--success)">Data storage included</div>
        <div class="svc-item" style="--dot:var(--success)">SLA-backed support team</div>
        <div class="svc-item" style="--dot:var(--success)">Continuous FTA compliance updates</div>
      </div>
    </div>
    <div style="text-align:center;margin-top:40px">
      <button class="btn btn-primary btn-lg" onclick="showScreen('onboarding')">Begin Your Onboarding ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 3 ‚Äî ONBOARDING START
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-onboarding" class="screen">
  <div class="center-screen">
    <div class="card" style="max-width:600px;width:100%;padding:48px">
      <div style="display:flex;justify-content:center;margin-bottom:24px">
        <div class="logo-box"><div class="logo-sq"><span>K</span><span>G</span><span>R</span><span>N</span></div><div class="logo-text"><span class="logo-name">KGRN</span><span class="logo-sub">Chartered Accountants</span></div></div>
      </div>
      <div style="text-align:center;margin-bottom:32px">
        <div style="font-weight:900;font-size:24px;color:var(--gray-900);margin-bottom:8px">Welcome to E-Invoicing Onboarding</div>
        <div style="font-size:14px;color:var(--gray-600);line-height:1.7">This guided process takes approximately <strong>10‚Äì15 minutes</strong> to complete.</div>
      </div>
      <div style="margin-bottom:28px">
        <div class="onb-step"><span class="onb-num">1</span><span style="font-size:14px;color:var(--gray-700)">üìÅ Upload or enter your company details</span></div>
        <div class="onb-step"><span class="onb-num">2</span><span style="font-size:14px;color:var(--gray-700)">‚úÖ Review & confirm extracted data</span></div>
        <div class="onb-step"><span class="onb-num">3</span><span style="font-size:14px;color:var(--gray-700)">üì¶ Select your e-invoicing services</span></div>
        <div class="onb-step"><span class="onb-num">4</span><span style="font-size:14px;color:var(--gray-700)">‚úçÔ∏è Review proposal & sign agreement</span></div>
        <div class="onb-step"><span class="onb-num">5</span><span style="font-size:14px;color:var(--gray-700)">‚ö° Complete payment & receive access</span></div>
      </div>
      <div class="info-box info-blue" style="margin-bottom:24px">
        <span>‚ÑπÔ∏è</span>
        <span style="font-size:12px;color:#1E40AF;line-height:1.6">Your information is encrypted in transit and at rest. This link is valid for 72 hours and is unique to your account.</span>
      </div>
      <button class="btn btn-primary btn-full btn-lg" onclick="showScreen('upload')">Begin Onboarding ‚Üí</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 4 ‚Äî UPLOAD & REVIEW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-upload" class="screen">
  <div id="upload-step" class="page">
    <div style="margin-bottom:32px;display:flex;justify-content:center" id="stepper-upload"></div>
    <div class="card" style="padding:40px">
      <div style="font-weight:800;font-size:22px;color:var(--gray-900);margin-bottom:8px">Upload Your Company Documents</div>
      <div style="font-size:14px;color:var(--gray-600);margin-bottom:28px">We'll automatically extract your company details ‚Äî no manual entry needed.</div>
      <div class="upload-zone" id="upload-zone" ondragover="event.preventDefault();this.classList.add('drag')" ondragleave="this.classList.remove('drag')" ondrop="handleFileDrop(event)" onclick="simulateExtraction()">
        <div style="width:56px;height:56px;border-radius:50%;background:var(--orange-light);display:flex;align-items:center;justify-content:center;margin:0 auto 16px;font-size:24px">üìÇ</div>
        <div style="font-weight:700;font-size:16px;color:var(--gray-900);margin-bottom:6px">Drag & drop your file here</div>
        <div style="font-size:13px;color:var(--gray-500);margin-bottom:16px">or click to browse</div>
        <div style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap">
          <span style="background:var(--gray-200);padding:3px 10px;border-radius:4px;font-size:11px;font-weight:600;color:var(--gray-600)">PDF</span>
          <span style="background:var(--gray-200);padding:3px 10px;border-radius:4px;font-size:11px;font-weight:600;color:var(--gray-600)">Excel (.xlsx)</span>
          <span style="background:var(--gray-200);padding:3px 10px;border-radius:4px;font-size:11px;font-weight:600;color:var(--gray-600)">CSV</span>
        </div>
      </div>
      <div style="margin-top:16px;text-align:center">
        <span style="font-size:12px;color:var(--gray-400)">Or <a href="#" style="color:var(--orange);font-weight:700" onclick="showReviewStep();return false">fill in details manually</a></span>
      </div>
    </div>
  </div>

  <div id="upload-loading" style="display:none;min-height:80vh;flex-direction:column;gap:20px;align-items:center;justify-content:center">
    <div class="spinner"></div>
    <div style="font-weight:700;font-size:16px;color:var(--gray-700)">Extracting company details from your file‚Ä¶</div>
    <div style="font-size:13px;color:var(--gray-400)">Analysing document structure and UAE-specific fields</div>
  </div>

  <div id="review-step" class="page" style="display:none">
    <div style="margin-bottom:32px;display:flex;justify-content:center" id="stepper-review"></div>
    <div class="card" style="padding:32px">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;flex-wrap:wrap;gap:12px">
        <div>
          <div style="font-weight:800;font-size:22px;color:var(--gray-900);margin-bottom:4px">Review & Confirm Details</div>
          <div style="display:flex;align-items:center;gap:8px"><span style="color:var(--success)">‚úÖ</span><span style="font-size:13px;color:var(--success);font-weight:600">We found 13 fields. Please review and confirm.</span></div>
        </div>
        <span class="badge badge-activated">Auto-Extracted</span>
      </div>
      <div class="grid-2">
        <div class="fg"><label class="fl">Legal Entity Name <span class="req">*</span></label><input class="fi" value="ABC Trading LLC"/></div>
        <div class="fg"><label class="fl">Trade Name(s)</label><input class="fi" value="ABC Trading"/></div>
        <div class="fg"><label class="fl">UAE TRN <span class="req">*</span></label><input class="fi" value="100234567890003"/></div>
        <div class="fg"><label class="fl">Trade License Number <span class="req">*</span></label><input class="fi" value="CN-2023-00456"/></div>
        <div class="fg"><label class="fl">License Type</label><input class="fi" value="Commercial"/></div>
        <div class="fg"><label class="fl">Emirate of Registration <span class="req">*</span></label><input class="fi" value="Dubai"/></div>
        <div class="fg span-2"><label class="fl">Registered Address <span class="req">*</span></label><input class="fi" value="Office 401, Business Bay Tower, Dubai, UAE"/></div>
        <div class="fg"><label class="fl">Primary Contact <span class="req">*</span></label><input class="fi" value="Mohammed Al Rashid"/></div>
        <div class="fg"><label class="fl">Business Email <span class="req">*</span></label><input class="fi" value="finance@abctrading.ae"/></div>
        <div class="fg"><label class="fl">Phone <span class="req">*</span></label><input class="fi" value="+971 4 234 5678"/></div>
        <div class="fg"><label class="fl">Est. Invoice Volume</label><input class="fi" value="~8,000/month"/></div>
        <div class="fg span-2"><label class="fl">ERP / Accounting System</label><input class="fi" value="SAP S/4HANA"/></div>
        <div class="fg"><label class="fl">Number of Legal Entities</label><input class="fi" value="3"/></div>
      </div>
      <div class="info-box info-yellow" style="margin:20px 0">
        <span>‚ö†Ô∏è</span><span style="font-size:12px;color:#92400E">Fields marked <strong>*</strong> are mandatory for FTA registration. Ensure TRN matches your VAT certificate exactly.</span>
      </div>
      <div style="display:flex;justify-content:space-between;margin-top:8px">
        <button class="btn btn-ghost" onclick="document.getElementById('review-step').style.display='none';document.getElementById('upload-step').style.display='block'">‚Üê Back</button>
        <button class="btn btn-primary" onclick="showScreen('services')">Confirm & Continue ‚Üí</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 5 ‚Äî SERVICE SELECTION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-services" class="screen">
  <div class="page">
    <div style="margin-bottom:32px;display:flex;justify-content:center" id="stepper-services"></div>
    <div class="sec-title">Select Your Services</div>
    <div class="sec-sub">Choose the services relevant to your business. Your proposal will be generated based on your selection.</div>

    <div id="service-assessment" class="service-card" style="margin-bottom:16px;background:#EFF6FF;border-color:var(--info)" onclick="toggleService('assessment')">
      <div style="padding:20px 24px;display:flex;align-items:flex-start;gap:16px">
        <div id="chk-assessment" class="chk-box on" style="border-color:var(--info);background:var(--info)">‚úì</div>
        <div style="flex:1">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;flex-wrap:wrap">
            <span style="font-weight:800;font-size:16px;color:var(--gray-900)">Impact Assessment & Gap Analysis</span>
            <span style="background:var(--info);color:#fff;font-size:10px;font-weight:700;padding:2px 10px;border-radius:20px">PHASE 1</span>
          </div>
          <div class="grid-2">
            <div class="svc-item" style="--dot:var(--info)">Regulatory, technical & operational review</div>
            <div class="svc-item" style="--dot:var(--info)">AP/AR process & ERP configuration assessment</div>
            <div class="svc-item" style="--dot:var(--info)">Stakeholder & IT impact analysis</div>
            <div class="svc-item" style="--dot:var(--info)">90-day roadmap with governance</div>
          </div>
        </div>
      </div>
    </div>

    <div id="service-implementation" class="service-card" style="margin-bottom:16px;background:var(--orange-light);border-color:var(--orange)" onclick="toggleService('implementation')">
      <div style="padding:20px 24px;display:flex;align-items:flex-start;gap:16px">
        <div id="chk-implementation" class="chk-box on" style="border-color:var(--orange);background:var(--orange)">‚úì</div>
        <div style="flex:1">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;flex-wrap:wrap">
            <span style="font-weight:800;font-size:16px;color:var(--gray-900)">Implementation (One-Time)</span>
            <span style="background:var(--orange);color:#fff;font-size:10px;font-weight:700;padding:2px 10px;border-radius:20px">PHASE 2</span>
          </div>
          <div class="grid-2">
            <div class="svc-item">Master data validation & onboarding assistance</div>
            <div class="svc-item">Native ERP integration ‚Äî file upload / API</div>
            <div class="svc-item">End-to-end Taxilla platform configuration</div>
            <div class="svc-item">Sandbox testing ‚Äî 3 input/output transforms</div>
            <div class="svc-item">EMARA Tax portal entity onboarding</div>
            <div class="svc-item">Training & user manuals</div>
          </div>
        </div>
      </div>
    </div>

    <div id="service-subscription" class="service-card" style="margin-bottom:16px;background:#F0FDF4;border-color:var(--success)" onclick="toggleService('subscription')">
      <div style="padding:20px 24px;display:flex;align-items:flex-start;gap:16px">
        <div id="chk-subscription" class="chk-box on" style="border-color:var(--success);background:var(--success)">‚úì</div>
        <div style="flex:1">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;flex-wrap:wrap">
            <span style="font-weight:800;font-size:16px;color:var(--gray-900)">Annual Subscription</span>
            <span style="background:var(--success);color:#fff;font-size:10px;font-weight:700;padding:2px 10px;border-radius:20px">ONGOING</span>
          </div>
          <div class="grid-2">
            <div class="svc-item" style="--dot:var(--success)">Up to 150,000 invoices/year (single licence)</div>
            <div class="svc-item" style="--dot:var(--success)">Full KGRN‚ÄìTaxilla portal access</div>
            <div class="svc-item" style="--dot:var(--success)">Data storage included</div>
            <div class="svc-item" style="--dot:var(--success)">SLA-backed support & compliance updates</div>
          </div>
        </div>
      </div>
    </div>

    <div style="font-weight:800;font-size:16px;color:var(--gray-900);margin:24px 0 12px">Platform Add-Ons (included in subscription)</div>
    <div class="grid-2" style="margin-bottom:28px">
      <div id="addon-sending" class="service-card" style="background:var(--orange-light);border-color:var(--orange)" onclick="toggleAddon('sending')">
        <div style="padding:20px">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
            <div id="chk-addon-sending" class="chk-box on" style="border-color:var(--orange);background:var(--orange)">‚úì</div>
            <span style="font-size:18px">üì§</span><span style="font-weight:700;font-size:14px;color:var(--gray-900)">Sending eInvoices</span>
          </div>
          <div class="svc-item">PINT AE XML generation & validation</div>
          <div class="svc-item">Submission to C5 (FTA) & C3 (Buyer's ASP)</div>
          <div class="svc-item">Status sync back to ERP + error handling</div>
          <div class="svc-item">Standard reports & dashboards</div>
          <div class="svc-item">eDelivery to buyer (C4) via email</div>
          <div class="svc-item">MLS Status + Cross-Border Transactions</div>
        </div>
      </div>
      <div id="addon-receiving" class="service-card" onclick="toggleAddon('receiving')">
        <div style="padding:20px">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
            <div id="chk-addon-receiving" class="chk-box"></div>
            <span style="font-size:18px">üì•</span><span style="font-weight:700;font-size:14px;color:var(--gray-900)">Receiving eInvoices</span>
          </div>
          <div class="svc-item">Receive from C2 (Seller's ASP) + submit to C5</div>
          <div class="svc-item">PINT AE XML data transformation</div>
          <div class="svc-item">ERP submission via API (Webhooks)</div>
          <div class="svc-item">Email notification per subscribed event</div>
          <div class="svc-item">Invoice response via Peppol network</div>
          <div class="svc-item">Standard reports, dashboards, MLS Status</div>
        </div>
      </div>
    </div>

    <div style="display:flex;justify-content:space-between">
      <button class="btn btn-ghost" onclick="showScreen('upload')">‚Üê Back</button>
      <button class="btn btn-primary" onclick="showScreen('proposal')">üìÑ Generate Proposal</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 6 ‚Äî PROPOSAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-proposal" class="screen">
  <div class="page">
    <div style="margin-bottom:32px;display:flex;justify-content:center" id="stepper-proposal"></div>
    <div class="sec-title">Your Proposal</div>
    <div class="sec-sub">Review the proposal below. You may request changes before proceeding.</div>
    <div class="card" style="overflow:hidden;margin-bottom:24px">
      <div style="background:linear-gradient(135deg,#1A1A2E 0%,#0F3460 100%);padding:40px;position:relative;overflow:hidden">
        <div style="position:absolute;top:-30px;right:-30px;width:160px;height:160px;border-radius:50%;background:rgba(232,71,28,.15);pointer-events:none"></div>
        <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:16px;position:relative;z-index:1">
          <div class="logo-box"><div class="logo-sq"><span>K</span><span>G</span><span>R</span><span>N</span></div><div class="logo-text"><span class="logo-name" style="color:#fff">KGRN</span><span class="logo-sub" style="color:rgba(255,255,255,.5)">Chartered Accountants</span></div></div>
          <div style="text-align:right"><div style="font-size:11px;color:rgba(255,255,255,.5);letter-spacing:1px;text-transform:uppercase">Proposal Date</div><div style="font-size:13px;color:rgba(255,255,255,.9);font-weight:600" id="proposal-date"></div></div>
        </div>
        <div style="margin-top:28px;position:relative;z-index:1">
          <div style="font-size:11px;color:var(--orange-mid);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px;font-weight:700">Proposal For</div>
          <div style="font-weight:900;font-size:26px;color:#fff;margin-bottom:4px">ABC Trading LLC</div>
          <div style="font-size:13px;color:rgba(255,255,255,.55)">TRN: 100234567890003 ¬∑ Dubai, UAE</div>
          <div style="margin-top:12px;display:inline-flex;align-items:center;gap:6px;background:var(--orange);padding:6px 14px;border-radius:6px"><span style="color:#fff;font-size:12px;font-weight:700">‚ö° UAE FTA E-Invoicing Services Proposal</span></div>
        </div>
      </div>
      <div style="padding:32px 40px">
        <div style="font-weight:800;font-size:16px;color:var(--gray-900);margin-bottom:16px">Services Summary</div>
        <table class="data-table" style="margin-bottom:12px">
          <thead><tr><th>Service</th><th>Description</th><th>Type</th><th class="right">Fee</th></tr></thead>
          <tbody>
            <tr><td style="font-weight:700">Impact Assessment & Gap Analysis</td><td>90-day roadmap, readiness review, action plan</td><td><span class="badge badge-contacted">One-Time</span></td><td class="right" style="color:var(--orange)">AED TBD</td></tr>
            <tr><td style="font-weight:700">Implementation</td><td>Taxilla onboarding, ERP integration, training, sandbox</td><td><span class="badge badge-contacted">One-Time</span></td><td class="right" style="color:var(--orange)">AED TBD</td></tr>
            <tr><td style="font-weight:700">Annual Subscription</td><td>Up to 150k invoices/yr, portal access, SLA support</td><td><span class="badge badge-annual">Annual</span></td><td class="right" style="color:var(--orange)">AED TBD</td></tr>
            <tr><td style="font-weight:700">Sending eInvoices</td><td>PINT AE XML, C5 & C3 submission, reports</td><td><span class="badge badge-add-on">Add-On</span></td><td class="right" style="color:var(--success)">Included</td></tr>
          </tbody>
        </table>
        <div style="background:var(--orange-light);border-radius:8px;padding:12px 14px;display:flex;justify-content:space-between;align-items:center">
          <span style="font-weight:800;font-size:15px;color:var(--gray-900)">Total Investment</span>
          <span style="font-weight:900;font-size:16px;color:var(--orange)">AED TBD (from final quote)</span>
        </div>
        <div style="margin-top:28px;padding:20px;background:var(--gray-50);border-radius:10px">
          <div style="font-weight:700;font-size:14px;color:var(--gray-800);margin-bottom:8px">Terms & Conditions (Summary)</div>
          <div style="font-size:12px;color:var(--gray-600);line-height:1.8">
            ‚Ä¢ Annual subscription auto-renews unless cancelled 30 days prior to renewal date.<br>
            ‚Ä¢ All fees are exclusive of 5% UAE VAT.<br>
            ‚Ä¢ Payment is due within 15 days of invoice issuance.<br>
            ‚Ä¢ Full terms detailed in the service agreement provided in the next step.
          </div>
        </div>
      </div>
    </div>
    <div style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:12px">
      <div style="display:flex;gap:10px"><button class="btn btn-ghost" onclick="showScreen('services')">‚Üê Back</button><button class="btn btn-ghost">‚¨á Download PDF</button></div>
      <div style="display:flex;gap:10px"><button class="btn btn-secondary">‚úâ Request Changes</button><button class="btn btn-primary" onclick="showScreen('agreement')">‚úçÔ∏è Accept & Sign ‚Üí</button></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 7 ‚Äî AGREEMENT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-agreement" class="screen">
  <div class="page">
    <div style="margin-bottom:32px;display:flex;justify-content:center" id="stepper-agreement"></div>
    <div class="sec-title">Service Agreement</div>
    <div class="sec-sub">Please read the full agreement below, then sign electronically to proceed.</div>
    <div class="card" style="margin-bottom:20px">
      <div id="agreement-scroll" style="padding:32px;max-height:320px;overflow-y:auto;font-size:13px;line-height:1.8;color:var(--gray-700)" onscroll="checkAgreementScroll()">
        <div style="font-weight:800;font-size:15px;color:var(--gray-900);margin-bottom:12px">SERVICE AGREEMENT ‚Äî UAE E-INVOICING SERVICES</div>
        <p style="margin-bottom:12px"><strong>Between:</strong> KGRN Chartered Accountants LLC ("Service Provider") and ABC Trading LLC ("Client").</p>
        <p style="margin-bottom:12px"><strong>1. Scope of Services.</strong> The Service Provider agrees to deliver the services outlined in the accepted proposal, including Impact Assessment & Gap Analysis, Implementation, and Annual Subscription as applicable.</p>
        <p style="margin-bottom:12px"><strong>2. Payment Terms.</strong> Fees are payable within 15 days of invoice issuance. All amounts are exclusive of 5% UAE VAT. Late payment incurs 2% monthly interest on outstanding balances.</p>
        <p style="margin-bottom:12px"><strong>3. Confidentiality.</strong> Both parties agree to maintain strict confidentiality of all information shared during the engagement, including business data, system configurations, and financial details.</p>
        <p style="margin-bottom:12px"><strong>4. Data Protection.</strong> The Service Provider complies with UAE Federal Decree-Law No. 45 of 2021 on Personal Data Protection. Client data will not be shared with third parties without written consent.</p>
        <p style="margin-bottom:12px"><strong>5. Intellectual Property.</strong> All deliverables, templates, and configurations remain the property of the Client upon full payment. Platform licences from Taxilla are subject to Taxilla's terms.</p>
        <p style="margin-bottom:12px"><strong>6. Termination.</strong> Either party may terminate with 30 days written notice. Annual subscriptions are non-refundable after platform activation unless due to Service Provider fault.</p>
        <p style="margin-bottom:12px"><strong>7. Liability.</strong> Service Provider's total liability shall not exceed the fees paid in the preceding 12 months. Neither party is liable for indirect or consequential losses.</p>
        <p style="margin-bottom:12px"><strong>8. Governing Law.</strong> This agreement is governed by the laws of the United Arab Emirates, specifically Dubai jurisdiction.</p>
        <div style="color:var(--gray-400);font-size:12px;margin-top:12px">‚Äî Scroll to bottom to confirm you have read the full agreement ‚Äî</div>
      </div>
    </div>
    <div class="card" style="padding:28px" id="sign-form">
      <div style="font-weight:700;font-size:14px;color:var(--gray-900);margin-bottom:16px">Electronic Signature</div>
      <div style="margin-bottom:16px"><div class="fg"><label class="fl">Full Legal Name (as signatory) <span class="req">*</span></label><input class="fi" id="sig-name" placeholder="Mohammed Al Rashid" oninput="checkSignReady()"/></div></div>
      <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:20px;cursor:pointer" onclick="toggleAgreementCheck()">
        <div id="agree-check" class="chk-box"></div>
        <span style="font-size:13px;color:var(--gray-700);line-height:1.6">I confirm I have read and accept the full Service Agreement. I am duly authorised to sign on behalf of <strong>ABC Trading LLC</strong>.</span>
      </div>
      <div id="scroll-warning" style="font-size:12px;color:var(--warn);margin-bottom:12px;display:flex;align-items:center;gap:6px">
        <span>‚ö†Ô∏è</span> Please scroll through the full agreement above before signing.
      </div>
      <div style="display:flex;justify-content:space-between">
        <button class="btn btn-ghost" onclick="showScreen('proposal')">‚Üê Back</button>
        <button class="btn btn-primary" id="sign-btn" disabled onclick="signAgreement()">‚úçÔ∏è Sign & Accept Agreement</button>
      </div>
    </div>
    <div id="signed-success" style="display:none" class="center-screen">
      <div class="card" style="max-width:480px;width:100%;padding:48px;text-align:center">
        <div style="width:72px;height:72px;border-radius:50%;background:#F0FDF4;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:36px">‚úÖ</div>
        <div style="font-weight:800;font-size:20px;color:var(--gray-900);margin-bottom:8px">Agreement Signed!</div>
        <div style="font-size:13px;color:var(--gray-600);line-height:1.7;margin-bottom:8px">Signed by: <strong id="signed-name-display"></strong></div>
        <div style="font-size:12px;color:var(--gray-400);margin-bottom:24px" id="signed-timestamp"></div>
        <button class="btn btn-primary btn-full" onclick="showScreen('payment')">Continue to Payment ‚Üí</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 8 ‚Äî PAYMENT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-payment" class="screen">
  <div class="page-md">
    <div style="margin-bottom:32px;display:flex;justify-content:center" id="stepper-payment"></div>
    <div class="sec-title">Secure Payment</div>
    <div class="sec-sub">All transactions are encrypted and processed securely.</div>
    <div id="payment-form-section">
      <div class="grid-2" style="align-items:start">
        <div>
          <div class="card" style="padding:24px;margin-bottom:16px">
            <div style="font-weight:700;font-size:14px;color:var(--gray-900);margin-bottom:14px">Order Summary</div>
            <div class="order-row"><span>Impact Assessment & Gap Analysis</span><span style="font-weight:700">AED TBD</span></div>
            <div class="order-row"><span>Implementation (One-Time)</span><span style="font-weight:700">AED TBD</span></div>
            <div class="order-row"><span>Annual Subscription (Year 1)</span><span style="font-weight:700">AED TBD</span></div>
            <div class="order-row"><span>VAT 5%</span><span style="font-weight:700">AED TBD</span></div>
            <div style="border-top:2px solid var(--gray-200);margin-top:10px;padding-top:10px;display:flex;justify-content:space-between"><span style="font-weight:800;font-size:14px;color:var(--gray-900)">Total Due</span><span style="font-weight:900;font-size:16px;color:var(--orange)">AED TBD</span></div>
          </div>
          <div style="display:flex;gap:8px;align-items:center;padding:12px;background:#F0FDF4;border-radius:8px;border:1px solid #BBF7D0">
            <span style="color:var(--success)">üõ°Ô∏è</span><span style="font-size:12px;color:var(--success);font-weight:600">256-bit SSL Encrypted ¬∑ PCI DSS Compliant</span>
          </div>
        </div>
        <div class="card" style="padding:24px">
          <div style="display:flex;gap:8px;margin-bottom:20px">
            <button class="pay-tab active" id="tab-card" onclick="setPayTab('card')">üí≥ Credit / Debit Card</button>
            <button class="pay-tab" id="tab-bank" onclick="setPayTab('bank')">üè¶ Bank Transfer</button>
          </div>
          <div id="card-form">
            <div style="display:flex;flex-direction:column;gap:14px">
              <div class="fg"><label class="fl">Card Number</label><input class="fi" placeholder="1234 5678 9012 3456"/></div>
              <div class="fg"><label class="fl">Cardholder Name</label><input class="fi" placeholder="Mohammed Al Rashid"/></div>
              <div class="grid-2"><div class="fg"><label class="fl">Expiry</label><input class="fi" placeholder="MM/YY"/></div><div class="fg"><label class="fl">CVV</label><input class="fi" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢"/></div></div>
              <button class="btn btn-primary btn-full" onclick="processPayment()">üîí Pay Securely</button>
            </div>
          </div>
          <div id="bank-form" style="display:none">
            <div style="background:var(--gray-50);border-radius:8px;padding:16px;margin-bottom:14px">
              <div class="order-row" style="padding:4px 0"><span style="color:var(--gray-500)">Bank</span><span style="font-weight:700">Emirates NBD</span></div>
              <div class="order-row" style="padding:4px 0"><span style="color:var(--gray-500)">Account Name</span><span style="font-weight:700">KGRN Chartered Accountants LLC</span></div>
              <div class="order-row" style="padding:4px 0"><span style="color:var(--gray-500)">IBAN</span><span style="font-weight:700;font-size:12px">AE07 0260 0000 0000 1234 567</span></div>
              <div class="order-row" style="padding:4px 0"><span style="color:var(--gray-500)">SWIFT</span><span style="font-weight:700">EBILAEAD</span></div>
              <div class="order-row" style="padding:4px 0"><span style="color:var(--gray-500)">Reference</span><span style="font-weight:700">KGRN-EINV-2024-001</span></div>
            </div>
            <button class="btn btn-secondary btn-full" onclick="showScreen('invoice')">‚úÖ I've Made the Transfer</button>
          </div>
        </div>
      </div>
    </div>
    <div id="payment-processing" style="display:none;min-height:60vh;flex-direction:column;gap:20px;align-items:center;justify-content:center">
      <div class="spinner"></div>
      <div style="font-weight:700;font-size:16px;color:var(--gray-700)">Processing your payment securely‚Ä¶</div>
    </div>
    <div id="payment-success" style="display:none" class="center-screen">
      <div class="card" style="max-width:480px;width:100%;padding:48px;text-align:center">
        <div style="font-size:64px;margin-bottom:20px">‚úÖ</div>
        <div style="font-weight:800;font-size:20px;color:var(--gray-900);margin-bottom:10px">Payment Successful!</div>
        <div style="font-size:13px;color:var(--gray-600);margin-bottom:24px;line-height:1.7">Your invoice has been emailed to <strong>finance@abctrading.ae</strong>. Your e-invoicing account is now being activated.</div>
        <div style="display:flex;gap:10px;justify-content:center"><button class="btn btn-secondary" onclick="showScreen('invoice')">üßæ View Invoice</button><button class="btn btn-primary" onclick="showScreen('dashboard')">üìä Go to Dashboard</button></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 9 ‚Äî INVOICE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-invoice" class="screen">
  <div class="page-md">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:12px">
      <div><div style="font-weight:900;font-size:24px;color:var(--gray-900)">Invoice</div><div style="display:flex;align-items:center;gap:8px;margin-top:4px"><span style="color:var(--success)">‚úÖ</span><span style="font-size:13px;color:var(--success);font-weight:600">Emailed to finance@abctrading.ae</span></div></div>
      <button class="btn btn-secondary">‚¨á Download PDF</button>
    </div>
    <div class="card" style="overflow:hidden">
      <div style="background:var(--orange);padding:28px 36px;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:16px">
        <div class="logo-box"><div class="logo-sq"><span>K</span><span>G</span><span>R</span><span>N</span></div><div class="logo-text"><span class="logo-name" style="color:#fff">KGRN</span><span class="logo-sub" style="color:rgba(255,255,255,.6)">Chartered Accountants</span></div></div>
        <div style="text-align:right"><div style="font-weight:900;font-size:22px;color:#fff">TAX INVOICE</div><div style="font-size:12px;color:rgba(255,255,255,.75)">Invoice #: KGRN-INV-2024-0847</div><div style="font-size:12px;color:rgba(255,255,255,.75)" id="invoice-date"></div></div>
      </div>
      <div style="padding:28px 36px">
        <div class="grid-2" style="margin-bottom:28px">
          <div><div style="font-size:10px;font-weight:800;color:var(--gray-400);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:8px">BILLED FROM</div><div style="font-weight:700;font-size:13px;color:var(--gray-900)">KGRN Chartered Accountants LLC</div><div style="font-size:13px;color:var(--gray-600)">Dubai, United Arab Emirates</div><div style="font-size:13px;color:var(--gray-600)">TRN: 100KGRN000001234</div></div>
          <div><div style="font-size:10px;font-weight:800;color:var(--gray-400);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:8px">BILLED TO</div><div style="font-weight:700;font-size:13px;color:var(--gray-900)">ABC Trading LLC</div><div style="font-size:13px;color:var(--gray-600)">Office 401, Business Bay Tower, Dubai</div><div style="font-size:13px;color:var(--gray-600)">TRN: 100234567890003</div></div>
        </div>
        <table class="data-table" style="margin-bottom:20px">
          <thead><tr><th>Description</th><th>Type</th><th class="right">Amount (AED)</th></tr></thead>
          <tbody>
            <tr><td>Impact Assessment & Gap Analysis</td><td><span class="badge badge-contacted">One-Time</span></td><td class="right">TBD</td></tr>
            <tr><td>Implementation ‚Äî Taxilla Platform Onboarding & Integration</td><td><span class="badge badge-contacted">One-Time</span></td><td class="right">TBD</td></tr>
            <tr><td>Annual Subscription ‚Äî 150,000 Invoices (Year 1)</td><td><span class="badge badge-annual">Annual</span></td><td class="right">TBD</td></tr>
          </tbody>
        </table>
        <div style="display:flex;justify-content:flex-end">
          <div style="width:260px">
            <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--gray-100)"><span style="font-size:13px;color:var(--gray-600)">Subtotal</span><span style="font-size:13px;font-weight:700;color:var(--gray-900)">AED TBD</span></div>
            <div style="display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--gray-100)"><span style="font-size:13px;color:var(--gray-600)">VAT (5%)</span><span style="font-size:13px;font-weight:700;color:var(--gray-900)">AED TBD</span></div>
            <div style="display:flex;justify-content:space-between;padding:10px 14px;background:var(--orange);border-radius:8px;margin-top:8px"><span style="font-weight:800;font-size:14px;color:#fff">TOTAL DUE</span><span style="font-weight:900;font-size:16px;color:#fff">AED TBD</span></div>
          </div>
        </div>
        <div style="margin-top:24px;padding:16px;background:#F0FDF4;border-radius:8px;display:flex;align-items:center;gap:10px;border:1px solid #BBF7D0">
          <span style="color:var(--success);font-size:18px">‚úÖ</span><span style="font-size:13px;color:var(--success);font-weight:600">Payment received. This is a valid UAE Tax Invoice compliant with FTA regulations.</span>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:24px">
      <button class="btn btn-primary" onclick="showScreen('dashboard')">üìä Access E-Invoicing Dashboard</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 10 ‚Äî PASSWORD RESET
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-pwreset" class="screen">
  <div class="center-screen">
    <div class="card" style="max-width:420px;width:100%;padding:40px">
      <div style="display:flex;justify-content:center;margin-bottom:24px"><div class="logo-box"><div class="logo-sq"><span>K</span><span>G</span><span>R</span><span>N</span></div><div class="logo-text"><span class="logo-name">KGRN</span><span class="logo-sub">Chartered Accountants</span></div></div></div>
      <div style="font-weight:800;font-size:20px;color:var(--gray-900);margin-bottom:6px">Set New Password</div>
      <div style="font-size:13px;color:var(--gray-600);margin-bottom:24px">Your temporary password must be changed before continuing.</div>
      <div style="display:flex;flex-direction:column;gap:14px">
        <div class="fg"><label class="fl">New Password <span class="req">*</span></label><input class="fi" type="password" placeholder="Min. 8 characters" id="new-pw" oninput="checkPwMatch()"/></div>
        <div class="fg"><label class="fl">Confirm Password <span class="req">*</span></label><input class="fi" type="password" placeholder="Repeat your password" id="confirm-pw" oninput="checkPwMatch()"/></div>
        <div id="pw-error" style="font-size:12px;color:var(--error);display:none">‚ö† Passwords do not match</div>
        <div style="background:var(--gray-50);border-radius:8px;padding:12px;border:1px solid var(--gray-200)">
          <div style="font-size:11px;font-weight:700;color:var(--gray-500);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px">Password Requirements</div>
          <div class="svc-item">At least 8 characters</div>
          <div class="svc-item">One uppercase letter</div>
          <div class="svc-item">One number</div>
          <div class="svc-item">One special character (!@#$%)</div>
        </div>
        <button class="btn btn-primary btn-full" id="reset-btn" disabled onclick="showScreen('dashboard')">üîí Set Password & Continue</button>
        <div style="text-align:center"><a href="#" onclick="showScreen('login');return false" style="font-size:13px;color:var(--gray-400)">‚Üê Back to Login</a></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 11 ‚Äî DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-dashboard" class="screen">
  <div class="portal-wrap">
    <div class="sidebar">
      <div class="si active"><span class="sii">üìä</span><span class="sil">Dashboard</span></div>
      <div class="si"><span class="sii">üßæ</span><span class="sil">Invoices</span></div>
      <div class="si"><span class="sii">üë•</span><span class="sil">Users</span></div>
      <div class="si"><span class="sii">üîó</span><span class="sil">Integrations</span></div>
      <div class="si"><span class="sii">üìà</span><span class="sil">Reports</span></div>
      <div class="si"><span class="sii">üîî</span><span class="sil">Notifications</span></div>
      <div class="si"><span class="sii">‚úâÔ∏è</span><span class="sil">Support</span></div>
    </div>
    <div class="portal-main" style="padding:28px">
      <div style="margin-bottom:24px">
        <div style="font-weight:900;font-size:24px;color:var(--gray-900)">Welcome, ABC Trading LLC üëã</div>
        <div style="font-size:14px;color:var(--gray-600)">Your e-invoicing platform is being set up. Complete the checklist to go live.</div>
      </div>
      <div class="grid-4" style="margin-bottom:24px">
        <div class="card" style="padding:20px"><div style="font-size:11px;font-weight:700;color:var(--gray-500);margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px">Invoices This Month</div><div style="font-weight:900;font-size:26px;color:var(--orange)">0</div><div style="font-size:11px;color:var(--gray-400);margin-top:4px">Target: 8,000/mo</div></div>
        <div class="card" style="padding:20px"><div style="font-size:11px;font-weight:700;color:var(--gray-500);margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px">Platform Status</div><div style="font-weight:900;font-size:26px;color:var(--success)">Active</div><div style="font-size:11px;color:var(--gray-400);margin-top:4px">As of today</div></div>
        <div class="card" style="padding:20px"><div style="font-size:11px;font-weight:700;color:var(--gray-500);margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px">Annual Limit</div><div style="font-weight:900;font-size:26px;color:var(--info)">150,000</div><div style="font-size:11px;color:var(--gray-400);margin-top:4px">Invoices remaining</div></div>
        <div class="card" style="padding:20px"><div style="font-size:11px;font-weight:700;color:var(--gray-500);margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px">Compliance Score</div><div style="font-weight:900;font-size:26px;color:var(--gray-400)">‚Äî</div><div style="font-size:11px;color:var(--gray-400);margin-top:4px">After first invoice</div></div>
      </div>
      <div class="grid-2">
        <div class="card" style="padding:24px">
          <div style="font-weight:800;font-size:16px;color:var(--gray-900);margin-bottom:4px">Setup Checklist</div>
          <div style="font-size:12px;color:var(--gray-500);margin-bottom:16px">4 of 7 complete ¬∑ On track for go-live</div>
          <div class="progress-bar" style="margin-bottom:20px"><div class="progress-fill" style="width:57%"></div></div>
          <div id="checklist-items"></div>
        </div>
        <div>
          <div class="card" style="padding:24px;margin-bottom:16px">
            <div style="font-weight:800;font-size:16px;color:var(--gray-900);margin-bottom:16px">Quick Access</div>
            <div class="grid-2" style="gap:10px">
              <div style="display:flex;align-items:center;gap:10px;padding:14px;background:var(--gray-50);border-radius:8px;cursor:pointer;border:1px solid var(--gray-200)"><span>üè¢</span><span style="font-size:13px;font-weight:600;color:var(--gray-700)">Company Profile</span></div>
              <div style="display:flex;align-items:center;gap:10px;padding:14px;background:var(--gray-50);border-radius:8px;cursor:pointer;border:1px solid var(--gray-200)"><span>üë•</span><span style="font-size:13px;font-weight:600;color:var(--gray-700)">User Management</span></div>
              <div style="display:flex;align-items:center;gap:10px;padding:14px;background:var(--gray-50);border-radius:8px;cursor:pointer;border:1px solid var(--gray-200)"><span>üîó</span><span style="font-size:13px;font-weight:600;color:var(--gray-700)">ERP Integration</span></div>
              <div style="display:flex;align-items:center;gap:10px;padding:14px;background:var(--gray-50);border-radius:8px;cursor:pointer;border:1px solid var(--gray-200)"><span>üìÑ</span><span style="font-size:13px;font-weight:600;color:var(--gray-700)">E-Invoice Settings</span></div>
              <div style="display:flex;align-items:center;gap:10px;padding:14px;background:var(--gray-50);border-radius:8px;cursor:pointer;border:1px solid var(--gray-200)"><span>üìà</span><span style="font-size:13px;font-weight:600;color:var(--gray-700)">Reports</span></div>
              <div style="display:flex;align-items:center;gap:10px;padding:14px;background:var(--gray-50);border-radius:8px;cursor:pointer;border:1px solid var(--gray-200)"><span>üí¨</span><span style="font-size:13px;font-weight:600;color:var(--gray-700)">Support</span></div>
            </div>
          </div>
          <div class="card" style="padding:20px">
            <div style="display:flex;gap:12px;align-items:flex-start">
              <div style="width:36px;height:36px;border-radius:50%;background:var(--orange-light);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:18px">üë§</div>
              <div>
                <div style="font-weight:700;font-size:14px;color:var(--gray-900);margin-bottom:4px">Your Dedicated KGRN Consultant</div>
                <div style="font-size:12px;color:var(--gray-600)">Contact us for implementation support</div>
                <div style="font-size:12px;color:var(--orange);font-weight:600;margin-top:4px">einvoicing@kgrn.ae ¬∑ +971 4 XXX XXXX</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 12 ‚Äî SUPPORT PORTAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-support" class="screen">
  <div class="portal-wrap">
    <div class="sidebar">
      <div class="si active" onclick="setSupportTab('pipeline')"><span class="sii">üì•</span><span class="sil">Lead Pipeline</span></div>
      <div class="si" onclick="setSupportTab('monitor')"><span class="sii">‚úÖ</span><span class="sil">Onboarding Monitor</span></div>
      <div class="si" onclick="setSupportTab('catalog')"><span class="sii">üì¶</span><span class="sil">Service Catalog</span></div>
      <div class="si" onclick="setSupportTab('payments')"><span class="sii">üíµ</span><span class="sil">Payments & Invoices</span></div>
      <div class="si" onclick="setSupportTab('users')"><span class="sii">üë§</span><span class="sil">User Management</span></div>
    </div>
    <div class="portal-main">
      <div id="support-pipeline" style="padding:28px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:12px">
          <div><div style="font-weight:900;font-size:24px;color:var(--gray-900)">Lead Pipeline</div><div style="font-size:14px;color:var(--gray-600)">6 total leads ¬∑ 4 active onboardings</div></div>
          <div style="display:flex;gap:10px;flex-wrap:wrap"><button class="btn btn-ghost btn-sm">üîç Search</button><button class="btn btn-ghost btn-sm">‚öô Filter</button><button class="btn btn-primary btn-sm">üì§ Invite Lead</button></div>
        </div>
        <div class="kanban" id="kanban-board"></div>
        <div id="lead-detail" style="display:none;margin-top:24px;animation:fadeIn .25s ease">
          <button onclick="closeLead()" style="background:none;border:none;cursor:pointer;color:var(--gray-600);font-size:13px;display:flex;align-items:center;gap:6px;margin-bottom:20px">‚Üê Back to Pipeline</button>
          <div class="grid-2">
            <div class="card" style="padding:24px">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;flex-wrap:wrap;gap:12px">
                <div><div style="font-weight:800;font-size:18px;color:var(--gray-900)" id="detail-name"></div><div style="font-size:13px;color:var(--gray-600);margin-top:2px" id="detail-contact"></div></div>
                <span id="detail-badge"></span>
              </div>
              <div id="detail-fields"></div>
              <div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap"><button class="btn btn-primary btn-sm">‚úâ Send Email</button><button class="btn btn-secondary btn-sm">üì§ Onboarding Link</button></div>
            </div>
            <div class="card" style="padding:24px"><div style="font-weight:700;font-size:14px;color:var(--gray-900);margin-bottom:16px">Activity Timeline</div><div id="detail-timeline"></div></div>
          </div>
        </div>
        <div class="card" style="margin-top:24px;overflow:hidden" id="leads-table-container">
          <div style="padding:14px 20px;border-bottom:1px solid var(--gray-200);font-weight:700;font-size:14px;color:var(--gray-900)">All Leads ‚Äî Table View</div>
          <table class="data-table"><thead><tr><th>Company</th><th>Contact</th><th>TRN</th><th>Stage</th><th>Date</th><th>Actions</th></tr></thead><tbody id="leads-table-body"></tbody></table>
        </div>
      </div>
      <div id="support-other" style="display:none;padding:28px">
        <div style="font-weight:900;font-size:24px;color:var(--gray-900);margin-bottom:8px" id="support-other-title">Section</div>
        <div class="card" style="padding:40px;text-align:center"><div style="font-size:48px;margin-bottom:16px">üöß</div><div style="font-weight:700;font-size:16px;color:var(--gray-700)">This section is available in the full implementation.</div></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 13 ‚Äî EMAIL TEMPLATES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-emails" class="screen">
  <div class="page">
    <div class="sec-title">Email Templates</div>
    <div class="sec-sub">All automated and manual email communications sent by the KGRN team.</div>
    <div style="display:flex;gap:10px;margin-bottom:20px;overflow-x:auto;padding-bottom:4px;flex-wrap:wrap" id="email-tabs"></div>
    <div class="card" style="padding:28px" id="email-content"></div>
  </div>
</div>

<!-- Toast -->
<div id="toast" class="toast toast-success">
  <span id="toast-icon">‚úÖ</span>
  <span id="toast-msg" style="flex:1;color:var(--gray-900)"></span>
  <button onclick="document.getElementById('toast').style.display='none'" style="background:none;border:none;cursor:pointer;color:var(--gray-400)">‚úï</button>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let agreementScrolled = false;
let agreementChecked  = false;
let activeRole = 'client';
let serviceStates = { assessment:true, implementation:true, subscription:true };
let addonStates   = { sending:true, receiving:false };

// ‚îÄ‚îÄ‚îÄ Data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const leads = [
  { id:1, name:"ABC Trading LLC",          contact:"Mohammed Al Rashid", email:"finance@abctrading.ae",  status:"paid",       stage:"Paid",         date:"Feb 20, 2026", trn:"100234567890003" },
  { id:2, name:"Gulf Logistics FZE",       contact:"Sarah Johnson",       email:"s.johnson@gulf-log.ae", status:"inprogress", stage:"In Progress",  date:"Feb 22, 2026", trn:"100987654321001" },
  { id:3, name:"Al Noor Medical Supplies", contact:"Khalid Hassan",       email:"khasan@alnoor.ae",      status:"proposal",   stage:"Proposal Sent",date:"Feb 21, 2026", trn:"100112233445566" },
  { id:4, name:"Desert Rose Trading",      contact:"Priya Sharma",        email:"priya@drtrading.ae",    status:"contacted",  stage:"Contacted",    date:"Feb 24, 2026", trn:"‚Äî" },
  { id:5, name:"Falcon Retail Group",      contact:"Omar Abdullah",       email:"oabdullah@falcon.ae",   status:"new",        stage:"New Lead",     date:"Feb 24, 2026", trn:"‚Äî" },
  { id:6, name:"Blue Bay Construction",    contact:"David Chen",          email:"dchen@bluebay.ae",      status:"signed",     stage:"Signed",       date:"Feb 19, 2026", trn:"100557788990011" },
];
const pipeline = [
  { stage:"New",           color:"#2563EB", leads: leads.filter(l=>l.status==="new") },
  { stage:"Contacted",     color:"#D97706", leads: leads.filter(l=>l.status==="contacted") },
  { stage:"In Progress",   color:"#7C3AED", leads: leads.filter(l=>l.status==="inprogress") },
  { stage:"Proposal Sent", color:"#4B5563", leads: leads.filter(l=>l.status==="proposal") },
  { stage:"Signed",        color:"#16A34A", leads: leads.filter(l=>l.status==="signed") },
  { stage:"Paid",          color:"#E8471C", leads: leads.filter(l=>l.status==="paid") },
];
const checklistItems = [
  { done:true,  label:"Company details submitted" },
  { done:true,  label:"Services selected & proposal accepted" },
  { done:true,  label:"Agreement signed" },
  { done:true,  label:"Payment completed" },
  { done:false, label:"ERP integration setup" },
  { done:false, label:"First test invoice submitted" },
  { done:false, label:"Go-live confirmed" },
];
const timeline = [
  { label:"Lead captured",             time:"Feb 18, 2026 09:14", done:true  },
  { label:"Contacted via email",       time:"Feb 18, 2026 11:30", done:true  },
  { label:"Onboarding email sent",     time:"Feb 19, 2026 14:00", done:true  },
  { label:"Details submitted by client",time:"Feb 20, 2026 10:22",done:true  },
  { label:"Proposal accepted",         time:"Feb 20, 2026 16:45", done:true  },
  { label:"Agreement signed",          time:"Feb 21, 2026 09:12", done:true  },
  { label:"Payment received",          time:"Feb 21, 2026 15:33", done:true  },
  { label:"Platform activated",        time:"Pending",             done:false },
];
const emailTemplates = [
  { tag:"Onboarding Invitation", subject:"Your KGRN E-Invoicing Onboarding Invitation",
    body:"Dear [Client Name],\n\nWe're delighted to invite you to begin your UAE e-invoicing onboarding journey with KGRN Chartered Accountants.\n\nAs mandated by the Federal Tax Authority (FTA), UAE businesses must comply with the e-invoicing rollout. Please click the secure link below to start.\n\n[ Begin Onboarding ‚Üí ]\n\nThis link is valid for 72 hours.\n\nWarm regards,\nThe KGRN E-Invoicing Team\n+971 4 XXX XXXX" },
  { tag:"Proposal Ready", subject:"Your KGRN E-Invoicing Proposal is Ready",
    body:"Dear [Client Name],\n\nThank you for completing your onboarding details. We've prepared a tailored proposal for [Company Name].\n\n[ Review Proposal ‚Üí ]\n\nIf you'd like to discuss the proposal, please reply or call your consultant.\n\nKind regards,\nKGRN Chartered Accountants" },
  { tag:"Agreement Signing", subject:"Action Required: Sign Your Service Agreement",
    body:"Dear [Client Name],\n\nYou have accepted the KGRN E-Invoicing Services Proposal. The next step is to review and digitally sign your Service Agreement.\n\n[ Review & Sign Agreement ‚Üí ]\n\nYour electronic signature will be timestamped and legally binding under UAE law.\n\nBest regards,\nKGRN Client Services Team" },
  { tag:"Payment Confirmation", subject:"Payment Confirmed ‚Äî Invoice & Platform Access",
    body:"Dear [Client Name],\n\nYour payment has been received!\n\nAttached is your official UAE Tax Invoice (Invoice #KGRN-INV-2024-XXXX).\n\nYour KGRN e-invoicing platform is now being activated. You will receive access credentials shortly.\n\nFor queries: einvoicing@kgrn.ae\n\nWarm regards,\nKGRN Chartered Accountants" },
  { tag:"Welcome & Credentials", subject:"Welcome to KGRN E-Invoicing Portal ‚Äî Account Details",
    body:"Dear [Client Name],\n\nWelcome to the KGRN E-Invoicing Portal!\n\nYour account has been created:\n‚Ä¢ Portal URL: https://portal.kgrn.ae/einvoicing\n‚Ä¢ Username: [email@company.ae]\n‚Ä¢ Temporary Password: [Auto-generated]\n\n[ Login & Set Password ‚Üí ]\n\nIMPORTANT: Set a new password on first login within 24 hours.\n\nWelcome aboard,\nKGRN E-Invoicing Team" },
];

// ‚îÄ‚îÄ‚îÄ Screen Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const STEPS = ['Upload','Review','Services','Proposal','Agreement','Payment','Done'];
const stepperMap = { upload:0, review:1, services:2, proposal:3, agreement:4, payment:5 };

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  const el = document.getElementById('screen-' + id);
  if (el) { el.classList.add('active'); window.scrollTo(0, 0); }

  // Demo bar highlight
  document.querySelectorAll('.db').forEach(b => b.classList.toggle('active', b.dataset.s === id));

  // Nav visibility: hide on login only
  const noNav = ['login'];
  document.getElementById('topnav').style.display   = noNav.includes(id) ? 'none' : '';
  document.getElementById('demo-bar').style.display = '';

  // Screen-specific init
  if (id === 'upload')    { initUpload(); buildStepper('stepper-upload', 0); buildStepper('stepper-review', 1); }
  if (id === 'services')  { buildStepper('stepper-services', 2); }
  if (id === 'proposal')  { buildStepper('stepper-proposal', 3); setDate('proposal-date'); }
  if (id === 'agreement') { buildStepper('stepper-agreement', 4); resetAgreement(); }
  if (id === 'payment')   { buildStepper('stepper-payment', 5); resetPayment(); }
  if (id === 'invoice')   { setDate('invoice-date', true); }
  if (id === 'dashboard') { initDashboard(); }
  if (id === 'support')   { initSupport(); }
  if (id === 'emails')    { initEmails(); }
}

// ‚îÄ‚îÄ‚îÄ Login ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setRole(r) {
  activeRole = r;
  document.getElementById('login-client-area').style.display = r === 'client' ? 'block' : 'none';
  document.getElementById('login-admin-area').style.display  = r === 'admin'  ? 'block' : 'none';
  document.getElementById('role-client').style.background = r === 'client' ? 'var(--orange)' : 'transparent';
  document.getElementById('role-client').style.color      = r === 'client' ? '#fff' : 'var(--gray-500)';
  document.getElementById('role-admin').style.background  = r === 'admin'  ? 'var(--orange)' : 'transparent';
  document.getElementById('role-admin').style.color       = r === 'admin'  ? '#fff' : 'var(--gray-500)';
}
function doLogin() {
  const email = document.getElementById('login-email').value.trim();
  const pw    = document.getElementById('login-pw').value;
  const errEl = document.getElementById('login-error');
  if (!email || !pw) { errEl.style.display = 'flex'; return; }
  errEl.style.display = 'none';
  // Show logged-in state in nav
  document.getElementById('nav-user').style.display = 'flex';
  document.getElementById('nav-username').textContent = 'ABC Trading';
  showScreen('landing');
  showToast('Welcome back, ABC Trading LLC!', 'success');
}
function handleLogout() {
  document.getElementById('nav-user').style.display = 'none';
  showScreen('login');
}

// ‚îÄ‚îÄ‚îÄ Stepper ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function buildStepper(containerId, current) {
  const el = document.getElementById(containerId);
  if (!el) return;
  el.innerHTML = STEPS.map((s, i) => `
    <div class="step-item">
      <div class="step-col">
        <div class="step-dot ${i < current ? 'done' : ''} ${i === current ? 'active' : ''}">${i < current ? '‚úì' : i+1}</div>
        <span class="step-lbl ${i === current ? 'active' : ''}">${s}</span>
      </div>
      ${i < STEPS.length-1 ? `<div class="step-line ${i < current ? 'done' : ''}"></div>` : ''}
    </div>`).join('');
}

// ‚îÄ‚îÄ‚îÄ Upload ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initUpload() {
  document.getElementById('upload-step').style.display    = 'block';
  document.getElementById('upload-loading').style.display = 'none';
  document.getElementById('review-step').style.display    = 'none';
}
function handleFileDrop(e) { e.preventDefault(); document.getElementById('upload-zone').classList.remove('drag'); simulateExtraction(); }
function simulateExtraction() {
  document.getElementById('upload-step').style.display    = 'none';
  document.getElementById('upload-loading').style.display = 'flex';
  setTimeout(showReviewStep, 1800);
}
function showReviewStep() {
  document.getElementById('upload-loading').style.display = 'none';
  document.getElementById('review-step').style.display    = 'block';
}

// ‚îÄ‚îÄ‚îÄ Service toggles ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleService(key) {
  serviceStates[key] = !serviceStates[key];
  const colors = { assessment:'var(--info)', implementation:'var(--orange)', subscription:'var(--success)' };
  const bgs    = { assessment:'#EFF6FF',     implementation:'var(--orange-light)', subscription:'#F0FDF4' };
  const on = serviceStates[key];
  const card = document.getElementById('service-' + key);
  const chk  = document.getElementById('chk-' + key);
  card.style.borderColor = on ? colors[key] : 'var(--gray-200)';
  card.style.background  = on ? bgs[key]    : '#fff';
  chk.style.borderColor  = on ? colors[key] : 'var(--gray-300)';
  chk.style.background   = on ? colors[key] : '#fff';
  chk.textContent        = on ? '‚úì' : '';
}
function toggleAddon(key) {
  addonStates[key] = !addonStates[key];
  const on = addonStates[key];
  const card = document.getElementById('addon-' + key);
  const chk  = document.getElementById('chk-addon-' + key);
  card.style.borderColor = on ? 'var(--orange)' : 'var(--gray-200)';
  card.style.background  = on ? 'var(--orange-light)' : '#fff';
  chk.style.borderColor  = on ? 'var(--orange)' : 'var(--gray-300)';
  chk.style.background   = on ? 'var(--orange)' : '#fff';
  chk.textContent        = on ? '‚úì' : '';
}

// ‚îÄ‚îÄ‚îÄ Date helper ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function setDate(id, withPrefix) {
  const el = document.getElementById(id);
  if (!el) return;
  const d = new Date().toLocaleDateString('en-AE', { day:'2-digit', month:'long', year:'numeric' });
  el.textContent = withPrefix ? 'Date: ' + d : d;
}

// ‚îÄ‚îÄ‚îÄ Agreement ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function resetAgreement() {
  agreementScrolled = false; agreementChecked = false;
  const chk = document.getElementById('agree-check');
  if (chk) { chk.classList.remove('on'); chk.textContent = ''; }
  const btn = document.getElementById('sign-btn');
  if (btn) btn.disabled = true;
  const warn = document.getElementById('scroll-warning');
  if (warn) warn.style.display = 'flex';
  const sc = document.getElementById('agreement-scroll');
  if (sc) sc.scrollTop = 0;
  const sf = document.getElementById('sign-form');
  const ss = document.getElementById('signed-success');
  if (sf) sf.style.display = 'block';
  if (ss) ss.style.display = 'none';
}
function checkAgreementScroll() {
  const el = document.getElementById('agreement-scroll');
  if (!el) return;
  if (el.scrollTop + el.clientHeight >= el.scrollHeight - 10) {
    agreementScrolled = true;
    const warn = document.getElementById('scroll-warning');
    if (warn) warn.style.display = 'none';
    checkSignReady();
  }
}
function toggleAgreementCheck() {
  agreementChecked = !agreementChecked;
  const chk = document.getElementById('agree-check');
  chk.classList.toggle('on', agreementChecked);
  chk.textContent = agreementChecked ? '‚úì' : '';
  checkSignReady();
}
function checkSignReady() {
  const name = (document.getElementById('sig-name') || {}).value || '';
  const btn  = document.getElementById('sign-btn');
  if (btn) btn.disabled = !(agreementScrolled && agreementChecked && name.trim());
}
function signAgreement() {
  const name = document.getElementById('sig-name').value;
  document.getElementById('signed-name-display').textContent = name;
  document.getElementById('signed-timestamp').textContent =
    'Timestamp: ' + new Date().toLocaleString('en-AE', { dateStyle:'long', timeStyle:'short' });
  document.getElementById('sign-form').style.display    = 'none';
  document.getElementById('signed-success').style.display = 'flex';
}

// ‚îÄ‚îÄ‚îÄ Payment ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function resetPayment() {
  document.getElementById('payment-form-section').style.display = 'block';
  document.getElementById('payment-processing').style.display   = 'none';
  document.getElementById('payment-success').style.display      = 'none';
  setPayTab('card');
}
function setPayTab(tab) {
  document.getElementById('tab-card').classList.toggle('active', tab === 'card');
  document.getElementById('tab-bank').classList.toggle('active', tab === 'bank');
  document.getElementById('card-form').style.display = tab === 'card' ? 'block' : 'none';
  document.getElementById('bank-form').style.display = tab === 'bank' ? 'block' : 'none';
}
function processPayment() {
  document.getElementById('payment-form-section').style.display = 'none';
  document.getElementById('payment-processing').style.display   = 'flex';
  setTimeout(() => {
    document.getElementById('payment-processing').style.display = 'none';
    document.getElementById('payment-success').style.display    = 'flex';
  }, 2200);
}

// ‚îÄ‚îÄ‚îÄ Password reset ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function checkPwMatch() {
  const pw  = document.getElementById('new-pw').value;
  const co  = document.getElementById('confirm-pw').value;
  const err = document.getElementById('pw-error');
  const btn = document.getElementById('reset-btn');
  const bad = co.length > 0 && pw !== co;
  if (err) err.style.display = bad ? 'block' : 'none';
  if (btn) btn.disabled = bad || pw.length < 8;
}

// ‚îÄ‚îÄ‚îÄ Dashboard ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initDashboard() {
  const el = document.getElementById('checklist-items');
  if (!el || el.children.length > 0) return;
  el.innerHTML = checklistItems.map(c => `
    <div style="display:flex;align-items:center;gap:10px;padding:9px 0;border-bottom:1px solid var(--gray-100)">
      <div style="width:22px;height:22px;border-radius:50%;background:${c.done ? '#F0FDF4' : 'var(--gray-100)'};display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:12px">${c.done ? '‚úÖ' : '‚óã'}</div>
      <span style="font-size:13px;color:${c.done ? 'var(--gray-500)' : 'var(--gray-900)'};font-weight:${c.done ? 400 : 600};text-decoration:${c.done ? 'line-through' : 'none'};flex:1">${c.label}</span>
      ${!c.done ? '<button class="btn btn-secondary btn-sm">Start</button>' : ''}
    </div>`).join('');
}

// ‚îÄ‚îÄ‚îÄ Support portal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initSupport() {
  buildKanban();
  buildLeadsTable();
  setSupportTab('pipeline');
}
function setSupportTab(tab) {
  document.querySelectorAll('#screen-support .si').forEach((el, i) => {
    el.classList.toggle('active', ['pipeline','monitor','catalog','payments','users'][i] === tab);
  });
  document.getElementById('support-pipeline').style.display = tab === 'pipeline' ? 'block' : 'none';
  document.getElementById('support-other').style.display    = tab !== 'pipeline' ? 'block' : 'none';
  if (tab !== 'pipeline') {
    const titles = { monitor:'Onboarding Monitor', catalog:'Service Catalog', payments:'Payments & Invoices', users:'User Management' };
    document.getElementById('support-other-title').textContent = titles[tab] || tab;
  }
}
function buildKanban() {
  const el = document.getElementById('kanban-board');
  if (!el || el.children.length > 0) return;
  el.innerHTML = pipeline.map(col => `
    <div class="kanban-col">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px">
        <div style="width:10px;height:10px;border-radius:50%;background:${col.color}"></div>
        <span style="font-size:12px;font-weight:700;color:var(--gray-700);text-transform:uppercase;letter-spacing:.5px">${col.stage}</span>
        <span style="background:var(--gray-200);border-radius:10px;padding:1px 7px;font-size:11px;font-weight:700;color:var(--gray-600)">${col.leads.length}</span>
      </div>
      ${col.leads.map(l => `
        <div class="kanban-card" onclick="openLead(${l.id})">
          <div style="font-weight:700;font-size:13px;color:var(--gray-900);margin-bottom:4px">${l.name}</div>
          <div style="font-size:11px;color:var(--gray-500);margin-bottom:8px">${l.contact}</div>
          <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:10px;color:var(--gray-400)">${l.date}</span><span style="color:var(--gray-400)">‚Ä∫</span></div>
        </div>`).join('')}
    </div>`).join('');
}
function buildLeadsTable() {
  const el = document.getElementById('leads-table-body');
  if (!el) return;
  el.innerHTML = leads.map(l => `
    <tr>
      <td style="font-weight:700;color:var(--gray-900)">${l.name}</td>
      <td style="color:var(--gray-600)">${l.contact}</td>
      <td style="color:var(--gray-600);font-size:12px">${l.trn}</td>
      <td><span class="badge badge-${l.status}">${l.stage}</span></td>
      <td style="color:var(--gray-500)">${l.date}</td>
      <td><button class="btn btn-ghost btn-sm" onclick="openLead(${l.id})">üëÅ View</button></td>
    </tr>`).join('');
}
function openLead(id) {
  const l = leads.find(x => x.id === id);
  if (!l) return;
  document.getElementById('kanban-board').style.display          = 'none';
  document.getElementById('leads-table-container').style.display = 'none';
  document.getElementById('lead-detail').style.display           = 'block';
  document.getElementById('detail-name').textContent    = l.name;
  document.getElementById('detail-contact').textContent = l.contact + ' ¬∑ ' + l.email;
  document.getElementById('detail-badge').innerHTML = `<span class="badge badge-${l.status}">${l.stage}</span>`;
  document.getElementById('detail-fields').innerHTML = [['TRN', l.trn], ['Stage', l.stage], ['First Contact', l.date]].map(([k,v]) =>
    `<div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--gray-100)"><span style="font-size:12px;color:var(--gray-500)">${k}</span><span style="font-size:12px;font-weight:700;color:var(--gray-900)">${v}</span></div>`).join('');
  document.getElementById('detail-timeline').innerHTML = timeline.map((t,i) => `
    <div class="tl-item">
      <div class="tl-col">
        <div class="tl-dot ${t.done ? 'done' : ''}">${t.done ? '‚úì' : ''}</div>
        ${i < timeline.length-1 ? `<div class="tl-line ${t.done ? 'done' : ''}"></div>` : ''}
      </div>
      <div style="padding-bottom:8px">
        <div style="font-size:13px;font-weight:600;color:${t.done ? 'var(--gray-900)' : 'var(--gray-400)'}">${t.label}</div>
        <div style="font-size:11px;color:var(--gray-400)">${t.time}</div>
      </div>
    </div>`).join('');
}
function closeLead() {
  document.getElementById('lead-detail').style.display           = 'none';
  document.getElementById('kanban-board').style.display          = 'flex';
  document.getElementById('leads-table-container').style.display = 'block';
}

// ‚îÄ‚îÄ‚îÄ Email templates ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initEmails() {
  const tabsEl = document.getElementById('email-tabs');
  if (!tabsEl) return;
  tabsEl.innerHTML = emailTemplates.map((t,i) =>
    `<button class="email-tab ${i===0?'active':''}" onclick="setEmailTab(${i})">${t.tag}</button>`).join('');
  renderEmail(0);
}
function setEmailTab(i) {
  document.querySelectorAll('.email-tab').forEach((b,j) => b.classList.toggle('active', j===i));
  renderEmail(i);
}
function renderEmail(i) {
  const t = emailTemplates[i];
  const el = document.getElementById('email-content');
  if (!el) return;
  el.innerHTML = `
    <div style="font-size:12px;color:var(--gray-500);margin-bottom:4px">Subject:</div>
    <div style="font-weight:700;font-size:15px;color:var(--gray-900);margin-bottom:20px;padding:10px 14px;background:var(--gray-50);border-radius:6px">${t.subject}</div>
    <div style="font-size:13px;color:var(--gray-700);line-height:1.9;white-space:pre-line;background:var(--gray-50);border-radius:8px;padding:20px;border:1px solid var(--gray-200)">${t.body}</div>
    <div style="display:flex;gap:10px;margin-top:16px">
      <button class="btn btn-secondary btn-sm">üëÅ Preview</button>
      <button class="btn btn-primary btn-sm">üì§ Use Template</button>
    </div>`;
}

// ‚îÄ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showToast(msg, type) {
  type = type || 'success';
  const el  = document.getElementById('toast');
  const icons = { success:'‚úÖ', error:'‚ùå', info:'‚ÑπÔ∏è' };
  document.getElementById('toast-icon').textContent = icons[type] || '‚úÖ';
  document.getElementById('toast-msg').textContent  = msg;
  el.className = 'toast toast-' + type;
  el.style.display = 'flex';
  setTimeout(function() { el.style.display = 'none'; }, 3500);
}

// ‚îÄ‚îÄ‚îÄ Boot ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.addEventListener('DOMContentLoaded', function() {
  showScreen('login');
});
</script>
</body>
</html>
